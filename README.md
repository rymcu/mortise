<div align="center">

<pre>
â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â•šâ•â•â–ˆâ–ˆâ•”â•â•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â•šâ•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•  
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•     â•šâ•â•  â•šâ•â•â•â•â•â•  â•šâ•â•  â•šâ•â•    â•šâ•â•    â•šâ•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•
</pre>

**ç°ä»£åŒ–ä¼ä¸šçº§åå°ç®¡ç†è„šæ‰‹æ¶**

[![Java](https://img.shields.io/badge/Java-21-orange?logo=openjdk)](https://openjdk.org/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.5.7-brightgreen?logo=spring-boot)](https://spring.io/projects/spring-boot)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](./LICENSE)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)]()
[![PRs Welcome](https://img.shields.io/badge/PRs-welcome-brightgreen.svg)](https://github.com/rymcu/mortise/pulls)

[å¿«é€Ÿå¼€å§‹](#-quick-start) â€¢ [åŠŸèƒ½ç‰¹æ€§](#-features) â€¢ [æŠ€æœ¯æ¶æ„](#-é¡¹ç›®æ¶æ„) â€¢ [æ–‡æ¡£](#-æ–‡æ¡£ä¸­å¿ƒ) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“‘ ç›®å½•

- [ç®€ä»‹](#introduction)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [åŠŸèƒ½ç‰¹æ€§](#-features)
- [ç¯å¢ƒè¦æ±‚](#-requirements)
- [å¿«é€Ÿå¼€å§‹](#-quick-start)
  - [Docker Compose éƒ¨ç½²](#æ–¹å¼ä¸€docker-composeæ¨è)
  - [æœ¬åœ°å¼€å‘](#æ–¹å¼äºŒæœ¬åœ°å¼€å‘)
  - [ç”Ÿäº§éƒ¨ç½²](#æ–¹å¼ä¸‰ç”Ÿäº§éƒ¨ç½²)
- [ç›‘æ§ä¸ç®¡ç†](#-ç›‘æ§ä¸ç®¡ç†)
- [æ–‡æ¡£ä¸­å¿ƒ](#-æ–‡æ¡£ä¸­å¿ƒ)
- [é¡¹ç›®æ¶æ„](#-é¡¹ç›®æ¶æ„)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ç¤¾åŒºä¸æ”¯æŒ](#-ç¤¾åŒºä¸æ”¯æŒ)
- [å¼€æºåè®®](#-å¼€æºåè®®)

---

## Introduction

**Mortise** æ˜¯ä¸€æ¬¾ç°ä»£åŒ–ã€æ¨¡å—åŒ–çš„ä¼ä¸šçº§åå°ç®¡ç†è„šæ‰‹æ¶é¡¹ç›®ï¼ŒåŸºäº Spring Boot 3.5.7 æ„å»ºã€‚é‡‡ç”¨å¤šæ¨¡å—å•ä½“æ¶æ„è®¾è®¡ï¼Œé›†æˆäº†å®Œæ•´çš„è®¤è¯æˆæƒã€ç›‘æ§ã€ç¼“å­˜ç­‰ä¼ä¸šçº§åŠŸèƒ½ï¼Œå¼€ç®±å³ç”¨ã€‚

### ğŸ¯ é¡¹ç›®ç‰¹ç‚¹

- ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡** - 25 ä¸ªæ¨¡å—ã€6 å±‚ä¾èµ–çŸ©é˜µã€12 ç»„ SPI å¯æ‰©å±•æ¥å£
- ğŸš€ **å¼€ç®±å³ç”¨** - Docker Compose ä¸€é”®å¯åŠ¨å®Œæ•´ç¯å¢ƒ
- ğŸ”’ **å®‰å…¨å¯é ** - Spring Security 6 + JWT + OAuth2 å¤šå¹³å° + SMS éªŒè¯ç  + æ‰«ç ç™»å½•
- ğŸ“Š **å¯è§‚æµ‹æ€§** - é›†æˆ Prometheus + Grafana ç›‘æ§ä½“ç³»ã€è‡ªå®šä¹‰ DB/Redis æŒ‡æ ‡
- âš¡ **é«˜æ€§èƒ½** - MyBatis-Flex + Redis + JDK 21 è™šæ‹Ÿçº¿ç¨‹
- ğŸ›¡ï¸ **ç”Ÿäº§å°±ç»ª** - Resilience4j `@RateLimit` é™æµã€Jasypt åŠ å¯†ã€Flyway æ•°æ®åº“è¿ç§»
- ğŸ’¬ **å¾®ä¿¡é›†æˆ** - å¤šè´¦å·å…¬ä¼—å·ç®¡ç†ã€æ¶ˆæ¯è·¯ç”±ã€æ‰«ç ç™»å½•ã€æ¨¡æ¿æ¶ˆæ¯
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - x-file-storage ç»Ÿä¸€å­˜å‚¨ã€é˜¿é‡Œäº‘ OSS é€‚é…ã€åˆ†ç‰‡ä¸Šä¼ 

### ğŸ“¸ é¡¹ç›®é¢„è§ˆ

> ğŸ’¡ **æç¤º**: æˆªå›¾å³å°†ä¸Šçº¿ï¼Œæ•¬è¯·æœŸå¾…...

<!-- 
![Dashboard](docs/images/dashboard.png)
![Monitoring](docs/images/monitoring.png)
![User Management](docs/images/user-management.png)
-->

### âš¡ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| ğŸš€ å¯åŠ¨æ—¶é—´ | < 10s | åº”ç”¨å†·å¯åŠ¨åˆ°å°±ç»ª |
| ğŸ“¦ å†…å­˜å ç”¨ | ~300MB | ç©ºé—²çŠ¶æ€ JVM å†…å­˜ |
| ğŸ”¥ QPS | 1000+ | å•æœºå¹¶å‘å¤„ç†èƒ½åŠ› |
| âš¡ å“åº”æ—¶é—´ | < 50ms | å¹³å‡ API å“åº”æ—¶é—´ |
| ğŸ’¾ æ•°æ®åº“è¿æ¥æ±  | 10-20 | HikariCP é»˜è®¤é…ç½® |
| ğŸ”´ Redis å‘½ä¸­ç‡ | > 90% | ç¼“å­˜å‘½ä¸­ç‡ |

> ğŸ“ **æ³¨**: ä»¥ä¸Šæ•°æ®åŸºäº 4C8G æœåŠ¡å™¨ï¼Œå®é™…æ€§èƒ½å› ç¯å¢ƒè€Œå¼‚ã€‚

### ğŸš€ æŠ€æœ¯æ ˆ

**åç«¯æ ¸å¿ƒ**
- **Spring Boot 3.5.7** - ä¸»æ¡†æ¶
- **Spring Security 6** - å®‰å…¨è®¤è¯æ¡†æ¶
- **JWT (JJWT 0.12.5)** - æ— çŠ¶æ€ Token è®¤è¯
- **OAuth2 Client** - GitHub / Google / Logto / å¾®ä¿¡å¤šå¹³å°ç™»å½•
- **MyBatis-Flex 1.11.0** - è½»é‡çº§ ORM æ¡†æ¶
- **Redis 6.0+** - ç¼“å­˜ä¸ä¼šè¯å­˜å‚¨
- **PostgreSQL 17** - ä¸»æ•°æ®åº“ï¼ˆæ¨èï¼‰/ MySQL 8.0+
- **Flyway** - æ•°æ®åº“ç‰ˆæœ¬åŒ–è¿ç§»

**å¾®ä¿¡ç”Ÿæ€**
- **WxJava** - å¾®ä¿¡å…¬ä¼—å· / å¼€æ”¾å¹³å° SDK
- **å¤šè´¦å·ç®¡ç†** - åŠ¨æ€æœåŠ¡å®ä¾‹ã€é…ç½®çƒ­åŠ è½½

**æ–‡ä»¶å­˜å‚¨**
- **x-file-storage** - ç»Ÿä¸€æ–‡ä»¶ç®¡ç†æ¡†æ¶
- **é˜¿é‡Œäº‘ OSS** - å¯¹è±¡å­˜å‚¨é€‚é…

**ç›‘æ§ä¸è¿ç»´**
- **Spring Boot Actuator** - åº”ç”¨å¥åº·ç›‘æ§
- **Prometheus + Micrometer** - æ—¶åºæŒ‡æ ‡æ”¶é›†
- **Grafana** - å¯è§†åŒ–ç›‘æ§é¢æ¿
- **HikariCP** - é«˜æ€§èƒ½æ•°æ®åº“è¿æ¥æ± 

**å®‰å…¨ä¸é™æµ**
- **Resilience4j 2.2.0** - `@RateLimit` æ³¨è§£é™æµï¼ˆIP / ç”¨æˆ· / æ–¹æ³• / SpELï¼‰
- **Jasypt 3.0.5** - é…ç½®æ–‡ä»¶åŠ å¯†
- **Apache Commons** - å·¥å…·åº“é›†åˆï¼ˆLang3, IO, Codec, Text, Collections4ï¼‰

**å¼€å‘å·¥å…·**
- **JDK 21 è™šæ‹Ÿçº¿ç¨‹** - å¼‚æ­¥ä»»åŠ¡é»˜è®¤æ‰§è¡Œå™¨
- **SpringDoc OpenAPI 2.8** - API æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆï¼ˆSwagger UIï¼‰
- **Lombok** - ç®€åŒ– Java ä»£ç 
- **ULID Creator** - åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨

## âœ¨ Features

### âœ… å·²å®ç°åŠŸèƒ½

**æ ¸å¿ƒä¸šåŠ¡æ¨¡å—**
- [x] **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†ã€å¯†ç ä¿®æ”¹
- [x] **ä¼šå‘˜ç®¡ç†** - ä¼šå‘˜æ³¨å†Œã€ç™»å½•ã€ä¸ªäººèµ„æ–™ã€OAuth2 ç»‘å®šã€æ‰‹æœºéªŒè¯ç ç™»å½•
- [x] **è§’è‰²ç®¡ç†** - è§’è‰²å®šä¹‰ã€æƒé™åˆ†é…ã€è§’è‰²å±‚çº§
- [x] **èœå•ç®¡ç†** - åŠ¨æ€èœå•åŠ è½½ã€å¤šçº§èœå•æ”¯æŒã€æƒé™æ§åˆ¶
- [x] **æƒé™ç®¡ç†** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ã€ç»†ç²’åº¦æƒé™æ§åˆ¶
- [x] **å­—å…¸ç®¡ç†** - ç³»ç»Ÿå­—å…¸é…ç½®ã€å­—å…¸ç¼“å­˜ä¼˜åŒ–ã€`@DictFormat` è‡ªåŠ¨ç¿»è¯‘

**å®‰å…¨ä¸è®¤è¯**
- [x] **JWT è®¤è¯** - æ— çŠ¶æ€ Token è®¤è¯ã€è‡ªåŠ¨ç»­æœŸã€Token åˆ·æ–°
- [x] **Spring Security é›†æˆ** - ç»Ÿä¸€è®¤è¯æˆæƒã€æ–¹æ³•çº§æƒé™æ§åˆ¶
- [x] **OAuth2 å¤šå¹³å°ç™»å½•** - æ”¯æŒ GitHubã€Googleã€Logtoã€å¾®ä¿¡ç­‰å¤šå¹³å°ï¼ŒStrategy æ¨¡å¼å¯æ‰©å±•
- [x] **çŸ­ä¿¡éªŒè¯ç ç™»å½•** - æ‰‹æœºå· + éªŒè¯ç è®¤è¯ï¼ŒRedis å­˜å‚¨éªŒè¯ç 
- [x] **æ‰«ç ç™»å½•** - äºŒç»´ç ç”Ÿæˆã€æ‰«ç ç¡®è®¤ã€Spring Event äº‹ä»¶é©±åŠ¨
- [x] **å¤šç”¨æˆ·è¡¨è®¤è¯** - ç³»ç»Ÿç”¨æˆ· / ä¼šå‘˜ç”¨æˆ·åˆ†è¡¨ç®¡ç†ï¼Œ`CustomUserDetailsService` SPI æ‰©å±•
- [x] **é…ç½®åŠ å¯†** - Jasypt æ•æ„Ÿé…ç½®åŠ å¯†å­˜å‚¨

**æ“ä½œæ—¥å¿—ä¸å®¡è®¡**
- [x] **æ“ä½œæ—¥å¿—** - `@OperationLog` AOP æ³¨è§£ã€æ¨¡å—/æ“ä½œç±»å‹/å‚æ•°è®°å½•ã€å¼‚æ­¥å†™å…¥
- [x] **API æ—¥å¿—** - `@ApiLog` æ³¨è§£ã€è¯·æ±‚/å“åº”ä½“/å¤´ä¿¡æ¯è®°å½•ã€è€—æ—¶ç»Ÿè®¡
- [x] **æ—¥å¿—å­˜å‚¨ SPI** - æ”¯æŒæ•°æ®åº“å­˜å‚¨ã€æ–‡ä»¶å­˜å‚¨ï¼Œå¯æ‰©å±•è‡ªå®šä¹‰å®ç°
- [x] **å®¢æˆ·ç«¯ç±»å‹è¯†åˆ«** - è´£ä»»é“¾æ¨¡å¼è‡ªåŠ¨è¯†åˆ«å®¢æˆ·ç«¯ç±»å‹

**æ–‡ä»¶ç®¡ç†**
- [x] **æ–‡ä»¶ä¸Šä¼ ä¸‹è½½** - åŸºäº x-file-storage çš„ç»Ÿä¸€æ–‡ä»¶ç®¡ç†
- [x] **åˆ†ç‰‡ä¸Šä¼ ** - å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ æ”¯æŒ
- [x] **æ–‡ä»¶å…ƒæ•°æ®** - æ–‡ä»¶è¯¦æƒ…æ•°æ®åº“æŒä¹…åŒ–ã€åˆ é™¤äº‹ä»¶ç›‘å¬
- [x] **å¯¹è±¡å­˜å‚¨é€‚é…** - æ”¯æŒé˜¿é‡Œäº‘ OSS ç­‰å¤šç§å­˜å‚¨åç«¯

**é€šçŸ¥ç³»ç»Ÿ**
- [x] **ç»Ÿä¸€é€šçŸ¥æŠ½è±¡** - `NotificationSender` SPIï¼Œæ”¯æŒå¤šæ¸ é“æ‰©å±•
- [x] **é‚®ä»¶é€šçŸ¥** - Spring Mail + Thymeleaf æ¨¡æ¿å¼•æ“
- [x] **å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯** - å¾®ä¿¡å…¬ä¼—å·æ¨¡æ¿æ¶ˆæ¯æ¨é€
- [x] **å¼‚æ­¥æ‰¹é‡å‘é€** - æ”¯æŒå¼‚æ­¥å‘é€å’Œæ‰¹é‡å‘é€

**å¾®ä¿¡é›†æˆ**
- [x] **å…¬ä¼—å·ç®¡ç†** - å¤šè´¦å·ç®¡ç†ã€åŠ¨æ€æœåŠ¡å®ä¾‹ã€é…ç½®çƒ­åŠ è½½
- [x] **æ¶ˆæ¯è·¯ç”±** - å…³æ³¨/å–å…³/æ‰«ç /èœå•/æ–‡æœ¬æ¶ˆæ¯ç­‰äº‹ä»¶è·¯ç”±
- [x] **å¾®ä¿¡æ‰«ç ç™»å½•** - å…¬ä¼—å·æ‰«ç  + å¾®ä¿¡å¼€æ”¾å¹³å°æ‰«ç ç™»å½•
- [x] **æ¨¡æ¿æ¶ˆæ¯** - å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯å‘é€ä¸ç®¡ç†
- [x] **å¾®ä¿¡å¼€æ”¾å¹³å°** - ç¬¬ä¸‰æ–¹å¹³å°æ¥å…¥æ”¯æŒ

**ç¼“å­˜ä¸æ€§èƒ½**
- [x] **å¤šçº§ç¼“å­˜** - ç»Ÿä¸€ç¼“å­˜æŠ½è±¡ã€Redis å®ç°ã€ç¼“å­˜è¿‡æœŸç­–ç•¥
- [x] **SPI æ¶æ„** - `CacheConfigurer` æ¨¡å—åŒ–ç¼“å­˜ TTL æ³¨å†Œã€`CacheExpirationHandler` è¿‡æœŸäº‹ä»¶å¤„ç†
- [x] **ç¼“å­˜é¢„çƒ­** - åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½çƒ­ç‚¹æ•°æ®
- [x] **é”®è¿‡æœŸç›‘å¬** - Redis Keyspace Notification è‡ªåŠ¨å¤„ç†è¿‡æœŸäº‹ä»¶

**API æ–‡æ¡£**
- [x] **SpringDoc OpenAPI 3** - è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£
- [x] **æ¥å£åˆ†ç»„** - Admin / API åˆ†ç»„å±•ç¤º
- [x] **Swagger UI** - å†…ç½®äº¤äº’å¼ API è°ƒè¯•ç•Œé¢

**ç›‘æ§ä¸è¿ç»´**
- [x] **Actuator é›†æˆ** - å¥åº·æ£€æŸ¥ã€åº”ç”¨æŒ‡æ ‡ã€ç«¯ç‚¹ç®¡ç†
- [x] **Prometheus é›†æˆ** - æŒ‡æ ‡å¯¼å‡ºã€è‡ªå®šä¹‰æŒ‡æ ‡ã€å…¬å…±æ ‡ç­¾
- [x] **Grafana å¯è§†åŒ–** - å®æ—¶ç›‘æ§é¢æ¿ã€å‘Šè­¦é…ç½®
- [x] **æ•°æ®åº“ç›‘æ§** - HikariCP è¿æ¥æ± ç›‘æ§ã€è‡ªå®šä¹‰æ•°æ®åº“å¥åº·æŒ‡æ ‡
- [x] **Redis å¥åº·æ£€æŸ¥** - è‡ªå®šä¹‰ Redis è¿æ¥å¥åº·æŒ‡æ ‡
- [x] **å¯åŠ¨æ€§èƒ½ç›‘æ§** - åº”ç”¨å¯åŠ¨è€—æ—¶ç»Ÿè®¡

**é™æµä¸ä¿æŠ¤**
- [x] **Resilience4j é™æµ** - `@RateLimit` æ³¨è§£ã€å¤šç»´é™æµç­–ç•¥ï¼ˆIP / æ–¹æ³• / ç”¨æˆ· / SpELï¼‰
- [x] **é™æµå¥åº·æŒ‡æ ‡** - Resilience4j é™æµå™¨å¥åº·çŠ¶æ€ä¸ŠæŠ¥

**æ•°æ®æŒä¹…åŒ–**
- [x] **PostgreSQL æ·±åº¦é€‚é…** - JSONB / Duration / StringList è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨
- [x] **Flyway æ•°æ®åº“è¿ç§»** - ç‰ˆæœ¬åŒ– SQL è¿ç§»è„šæœ¬
- [x] **MyBatis-Flex** - è½»é‡çº§ ORMã€FlexId ç”Ÿæˆå™¨

**å¼€å‘ä½“éªŒ**
- [x] **æ¨¡å—åŒ–æ¶æ„** - æ¸…æ™°çš„ 15+ æ¨¡å—åˆ’åˆ†ï¼Œ6 å±‚ä¾èµ–çŸ©é˜µ
- [x] **SPI å¯æ‰©å±•** - 12 ç»„ SPI æ¥å£ï¼Œæ”¯æŒæ¨¡å—åŒ–çƒ­æ’æ‹”
- [x] **JDK 21 è™šæ‹Ÿçº¿ç¨‹** - å¼‚æ­¥ä»»åŠ¡é»˜è®¤ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹
- [x] **è¯¦ç»†æ–‡æ¡£** - 50+ æŠ€æœ¯æ–‡æ¡£ã€æœ€ä½³å®è·µæŒ‡å—
- [x] **Docker æ”¯æŒ** - ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ

### ğŸš§ å¼€å‘ä¸­ / è®¡åˆ’åŠŸèƒ½
- [ ] **å·¥ä½œæµå¼•æ“** - Flowable é›†æˆ
- [ ] **å¤šç§Ÿæˆ·æ”¯æŒ** - ç§Ÿæˆ·éš”ç¦»ã€æ•°æ®éš”ç¦»
- [ ] **æ”¯ä»˜é›†æˆ** - å¾®ä¿¡æ”¯ä»˜ / æ”¯ä»˜å®ï¼ˆä¾èµ–å·²å¼•å…¥ï¼‰
- [ ] **å®šæ—¶ä»»åŠ¡** - å®šæ—¶ä»»åŠ¡è°ƒåº¦

### ğŸ¯ è¿œæœŸè§„åˆ’
- [ ] **åˆ†å¸ƒå¼äº‹åŠ¡** - Seata é›†æˆ
- [ ] **æ¶ˆæ¯é˜Ÿåˆ—** - RocketMQ/Kafka é›†æˆ
- [ ] **å…¨æ–‡æœç´¢** - Elasticsearch é›†æˆ
- [ ] **å¾®æœåŠ¡åŒ–** - Spring Cloud æ”¹é€ æ–¹æ¡ˆ

## ğŸ“‹ Requirements

### ğŸ’» å¼€å‘ç¯å¢ƒ

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ | æ¨èç‰ˆæœ¬ |
|------|----------|----------|
| **Java** | 21+ | Eclipse Temurin 21 |
| **Maven** | 3.6.0+ | 3.9.x |
| **æ•°æ®åº“** | PostgreSQL 12+ / MySQL 8.0+ | PostgreSQL 17 |
| **Redis** | 6.0+ | 7.x |
| **IDE** | - | IntelliJ IDEA 2023+ |
| **Git** | 2.0+ | æœ€æ–°ç‰ˆæœ¬ |

### ğŸ³ Docker ç¯å¢ƒï¼ˆæ¨èï¼‰

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ |
|------|----------|
| **Docker** | 20.10+ |
| **Docker Compose** | 2.0+ |

### ğŸ’¾ èµ„æºè¦æ±‚

**æœ€ä½é…ç½®**
- CPU: 2 æ ¸å¿ƒ
- å†…å­˜: 4 GB
- ç£ç›˜: 10 GB å¯ç”¨ç©ºé—´

**æ¨èé…ç½®**
- CPU: 4 æ ¸å¿ƒä»¥ä¸Š
- å†…å­˜: 8 GB ä»¥ä¸Š
- ç£ç›˜: 20 GB å¯ç”¨ç©ºé—´ï¼ˆåŒ…å« Docker é•œåƒï¼‰

### ğŸŒ ç³»ç»Ÿæ”¯æŒ
- âœ… Windows 10/11
- âœ… macOS 11+
- âœ… Linux (Ubuntu 20.04+, CentOS 7+, Debian 10+)

## ğŸš€ Quick Start

### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰â­

é€‚åˆå¿«é€Ÿä½“éªŒå’Œå¼€å‘ç¯å¢ƒï¼Œä¸€é”®å¯åŠ¨åŒ…å«æ•°æ®åº“ã€Redisã€Nginx ç­‰å®Œæ•´æœåŠ¡ã€‚

#### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

æŒ‰ä½¿ç”¨åœºæ™¯é€‰æ‹©ï¼š

```bash
# åŸºç¡€ç‰ˆï¼ˆä¸æ‹‰å–å•†ä¸šç§æœ‰æ¨¡å—ï¼‰
git clone https://github.com/rymcu/mortise.git
cd mortise

# å•†ä¸šç‰ˆï¼ˆæ‹‰å–ç§æœ‰å­æ¨¡å—ï¼Œéœ€è¦å¯¹åº”ä»“åº“æƒé™ï¼‰
git clone --recurse-submodules git@github.com:rymcu/mortise.git
cd mortise

# å·²æœ‰ä»“åº“æ—¶è¡¥æ‹‰å­æ¨¡å—
git submodule update --init --recursive
```

å¦‚éœ€æ‹‰å–å•†ä¸šæ¨¡å—æœ€æ–°è¿œç«¯æäº¤ï¼š

```bash
git submodule update --remote --merge
```

ä»…éœ€ä¸»ä»“ä»£ç æ—¶ï¼Œä¹Ÿå¯ä½¿ç”¨ä»¥ä¸‹å¸¸è§„å…‹éš†æ–¹å¼ï¼š

```bash
# HTTPS
git clone https://github.com/rymcu/mortise.git
cd mortise

# SSH
git clone git@github.com:rymcu/mortise.git
cd mortise
```

#### 2ï¸âƒ£ é…ç½®æœ¬åœ°åŸŸåï¼ˆå¯é€‰ï¼‰

```bash
# Windows (ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ PowerShell)
.\update_hosts.bat

# macOS/Linux
sudo ./update_hosts.sh
```

æ·»åŠ çš„åŸŸåæ˜ å°„ï¼š
```
127.0.0.1 rymcu.local
127.0.0.1 npm.rymcu.local
127.0.0.1 auth.rymcu.local
127.0.0.1 logto.rymcu.local
```

#### 3ï¸âƒ£ å¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡ï¼ˆé¦–æ¬¡å¯åŠ¨ä¼šä¸‹è½½é•œåƒï¼Œéœ€è¦å‡ åˆ†é’Ÿï¼‰
docker-compose up -d

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker-compose logs -f

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

#### 4ï¸âƒ£ è®¿é—®æœåŠ¡

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| ğŸŒ åº”ç”¨ä¸»é¡µ | http://localhost:9999 | ä¸»åº”ç”¨æœåŠ¡ |
| ğŸ“Š Actuator | http://localhost:9999/mortise/actuator | ç›‘æ§ç«¯ç‚¹ |
| ğŸ—„ï¸ PostgreSQL | localhost:5432 | æ•°æ®åº“ï¼ˆç”¨æˆ·: mortise, å¯†ç : mortiseï¼‰ |
| ğŸ”´ Redis | localhost:6379 | ç¼“å­˜æœåŠ¡ |
| ğŸŒ Nginx | http://localhost:80 | åå‘ä»£ç† |

#### 5ï¸âƒ£ åœæ­¢æœåŠ¡

```bash
# åœæ­¢æœåŠ¡
docker-compose stop

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose down

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨ã€ç½‘ç»œã€å·
docker-compose down -v
```

---

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

é€‚åˆæ—¥å¸¸å¼€å‘è°ƒè¯•ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®ç¯å¢ƒã€‚

#### 1ï¸âƒ£ ç¯å¢ƒæ£€æŸ¥

```bash
# æ£€æŸ¥ Java ç‰ˆæœ¬ï¼ˆéœ€è¦ 21+ï¼‰
java -version

# æ£€æŸ¥ Maven ç‰ˆæœ¬ï¼ˆéœ€è¦ 3.6+ï¼‰
mvn -version

# æ£€æŸ¥ PostgreSQLï¼ˆéœ€è¦å®‰è£…å¹¶å¯åŠ¨ï¼‰
psql --version

# æ£€æŸ¥ Redisï¼ˆéœ€è¦å®‰è£…å¹¶å¯åŠ¨ï¼‰
redis-cli --version
```

#### 2ï¸âƒ£ æ•°æ®åº“åˆå§‹åŒ–

```sql
-- è¿æ¥ PostgreSQL
psql -U postgres

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE mortise;

-- åˆ›å»ºç”¨æˆ·
CREATE USER mortise WITH PASSWORD 'your_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE mortise TO mortise;

-- é€€å‡º
\q
```

#### 3ï¸âƒ£ Redis å¯åŠ¨

```bash
# Windows (éœ€è¦å…ˆå®‰è£… Redis)
redis-server

# macOS
brew services start redis

# Linux
sudo systemctl start redis
# æˆ–
redis-server
```

#### 4ï¸âƒ£ é…ç½®åº”ç”¨

ç¼–è¾‘é…ç½®æ–‡ä»¶ `mortise-app/src/main/resources/application-dev.yml`ï¼š

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/mortise
    username: mortise
    password: your_password
  
  data:
    redis:
      host: localhost
      port: 6379
      # password: your_redis_password  # å¦‚æœ‰å¯†ç 
```

#### 5ï¸âƒ£ ç¼–è¯‘é¡¹ç›®

```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean install -DskipTests

# æˆ–åªç¼–è¯‘
mvn clean package -DskipTests
```

#### 6ï¸âƒ£ å¯åŠ¨åº”ç”¨

```bash
# æ–¹å¼ 1: ä½¿ç”¨ Maven å¯åŠ¨
cd mortise-app
mvn spring-boot:run

# æ–¹å¼ 2: ä½¿ç”¨ jar åŒ…å¯åŠ¨
java -jar mortise-app/target/mortise-app-0.2.0.jar

# æ–¹å¼ 3: æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨
java -jar mortise-app/target/mortise-app-0.2.0.jar --spring.profiles.active=dev
```

#### 7ï¸âƒ£ éªŒè¯å¯åŠ¨

```bash
# å¥åº·æ£€æŸ¥ï¼ˆéœ€è¦å…ˆç™»å½•è·å– Tokenï¼‰
curl http://localhost:9999/mortise/actuator/health

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®
http://localhost:9999/mortise/actuator
```

#### 8ï¸âƒ£ å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰

åœ¨ IDE ä¸­å¯åŠ¨ï¼š
1. å¯¼å…¥é¡¹ç›®åˆ° IntelliJ IDEA
2. æ‰¾åˆ° `MortiseApplication.java`
3. å³é”® â†’ Run 'MortiseApplication'
4. å¼€å¯ IDEA çš„ Build Project Automatically å®ç°çƒ­é‡è½½

---

### æ–¹å¼ä¸‰ï¼šç”Ÿäº§éƒ¨ç½²

é€‚åˆç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚

#### æ‰“åŒ…åº”ç”¨

```bash
# ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…
mvn clean package -Pprod -DskipTests

# ç”Ÿæˆçš„ jar åŒ…ä½ç½®
ls -lh mortise-app/target/mortise-app-0.2.0.jar
```

#### ä½¿ç”¨ Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t mortise:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name mortise-app \
  -p 9999:9999 \
  -e SPRING_PROFILES_ACTIVE=prod \
  -e SPRING_DATASOURCE_URL=jdbc:postgresql://db-host:5432/mortise \
  -e SPRING_DATASOURCE_USERNAME=mortise \
  -e SPRING_DATASOURCE_PASSWORD=your_password \
  -e SPRING_DATA_REDIS_HOST=redis-host \
  mortise:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs -f mortise-app
```

#### ä½¿ç”¨ systemd éƒ¨ç½²ï¼ˆLinuxï¼‰

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/mortise.service`ï¼š

```ini
[Unit]
Description=Mortise Application
After=network.target

[Service]
Type=simple
User=mortise
WorkingDirectory=/opt/mortise
ExecStart=/usr/bin/java -jar /opt/mortise/mortise-app.jar
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
# é‡è½½é…ç½®
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start mortise

# å¼€æœºè‡ªå¯
sudo systemctl enable mortise

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status mortise
```

---

### ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

<details>
<summary><b>å¯åŠ¨å¤±è´¥ï¼šæ•°æ®åº“è¿æ¥é”™è¯¯</b></summary>

**é—®é¢˜**: `Connection refused` æˆ– `Authentication failed`

**è§£å†³**:
1. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å¯åŠ¨ï¼š`psql -U postgres`
2. æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å·²åˆ›å»ºï¼š`\l` æŸ¥çœ‹æ•°æ®åº“åˆ—è¡¨
4. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ 5432 ç«¯å£
</details>

<details>
<summary><b>å¯åŠ¨å¤±è´¥ï¼šRedis è¿æ¥é”™è¯¯</b></summary>

**é—®é¢˜**: `Could not connect to Redis`

**è§£å†³**:
1. æ£€æŸ¥ Redis æ˜¯å¦å¯åŠ¨ï¼š`redis-cli ping`ï¼ˆåº”è¿”å› PONGï¼‰
2. æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ Redis åœ°å€å’Œç«¯å£
3. å¦‚æœæœ‰å¯†ç ï¼Œç¡®ä¿é…ç½®äº†æ­£ç¡®çš„å¯†ç 
</details>

<details>
<summary><b>Docker å¯åŠ¨æ…¢</b></summary>

**é—®é¢˜**: `docker-compose up` é•¿æ—¶é—´æ— å“åº”

**è§£å†³**:
1. é¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½é•œåƒï¼Œè€å¿ƒç­‰å¾…
2. ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿå™¨
3. æŸ¥çœ‹å…·ä½“æ—¥å¿—ï¼š`docker-compose logs -f`
</details>

<details>
<summary><b>ç«¯å£è¢«å ç”¨</b></summary>

**é—®é¢˜**: `Port 9999 is already in use`

**è§£å†³**:
1. ä¿®æ”¹ `application.yml` ä¸­çš„ç«¯å£å·
2. æˆ–åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š
   - Windows: `netstat -ano | findstr 9999`
   - Linux/Mac: `lsof -i :9999`
</details>

## ğŸ“Š ç›‘æ§ä¸ç®¡ç†

### Actuator ç«¯ç‚¹è®¿é—®

åº”ç”¨å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ç›‘æ§ç«¯ç‚¹ï¼š

#### 1. è·å–è®¿é—®ä»¤ç‰Œ

```bash
# PowerShell
$response = Invoke-RestMethod -Uri "http://localhost:9999/mortise/api/v1/auth/login" `
  -Method Post `
  -ContentType "application/json" `
  -Body '{"account":"your_account","password":"your_password"}'
$token = $response.data.token

# Bash/cURL
curl -X POST http://localhost:9999/mortise/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"account":"your_account","password":"your_password"}'
```

#### 2. è®¿é—®ç›‘æ§ç«¯ç‚¹

```bash
# PowerShell
Invoke-RestMethod -Uri "http://localhost:9999/mortise/actuator/health" `
  -Headers @{ Authorization = "Bearer $token" }

# Bash/cURL
curl -H "Authorization: Bearer <token>" \
  http://localhost:9999/mortise/actuator/health
```

### ğŸ“ ç›‘æ§ç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | æè¿° | URL | è®¤è¯ |
|------|------|-----|------|
| ğŸ¥ å¥åº·æ£€æŸ¥ | åº”ç”¨æ•´ä½“å¥åº·çŠ¶æ€ã€ç»„ä»¶çŠ¶æ€ | `/mortise/actuator/health` | âœ… |
| â„¹ï¸ åº”ç”¨ä¿¡æ¯ | ç‰ˆæœ¬ã€ç¯å¢ƒã€æ„å»ºä¿¡æ¯ | `/mortise/actuator/info` | âœ… |
| ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡ | JVMã€ç³»ç»Ÿã€åº”ç”¨æŒ‡æ ‡ | `/mortise/actuator/metrics` | âœ… |
| ğŸ“Š Prometheus | Prometheus æ ¼å¼æŒ‡æ ‡å¯¼å‡º | `/mortise/actuator/prometheus` | âœ… |
| ğŸ“ ç«¯ç‚¹åˆ—è¡¨ | æ‰€æœ‰å¯ç”¨ Actuator ç«¯ç‚¹ | `/mortise/actuator` | âœ… |
| ğŸ—ƒï¸ æ•°æ®åº“ | æ•°æ®åº“è¿æ¥æ± çŠ¶æ€ | `/mortise/actuator/metrics/hikaricp.*` | âœ… |
| ğŸ”§ é…ç½®å±æ€§ | åº”ç”¨é…ç½®ä¿¡æ¯ | `/mortise/actuator/configprops` | âœ… |
| ğŸŒ¿ ç¯å¢ƒå˜é‡ | ç³»ç»Ÿç¯å¢ƒå’Œé…ç½® | `/mortise/actuator/env` | âœ… |

> ğŸ’¡ **æç¤º**: æ‰€æœ‰ç«¯ç‚¹éƒ½éœ€è¦ JWT Token è®¤è¯

### ğŸ¯ Prometheus + Grafana ç›‘æ§

#### Prometheus é…ç½®

```yaml
# prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'mortise-application'
    metrics_path: '/mortise/actuator/prometheus'
    static_configs:
      - targets: ['localhost:9999']
    # JWT è®¤è¯é…ç½®
    bearer_token: 'your_jwt_token'
    # æˆ–ä½¿ç”¨æ–‡ä»¶
    # bearer_token_file: '/path/to/token.txt'
```

#### å…³é”®ç›‘æ§æŒ‡æ ‡

**JVM æŒ‡æ ‡**
```
jvm_memory_used_bytes{area="heap"}        # å †å†…å­˜ä½¿ç”¨é‡
jvm_memory_max_bytes{area="heap"}         # å †å†…å­˜æœ€å¤§å€¼
jvm_gc_pause_seconds_sum                  # GC æ€»è€—æ—¶
jvm_threads_live_threads                  # æ´»è·ƒçº¿ç¨‹æ•°
```

**æ•°æ®åº“è¿æ¥æ± **
```
hikaricp_connections_active               # æ´»è·ƒè¿æ¥æ•°
hikaricp_connections_idle                 # ç©ºé—²è¿æ¥æ•°
hikaricp_connections_pending              # ç­‰å¾…è¿æ¥æ•°
hikaricp_connections_timeout_total        # è¿æ¥è¶…æ—¶æ¬¡æ•°
```

**HTTP è¯·æ±‚**
```
http_server_requests_seconds_count        # è¯·æ±‚æ€»æ•°
http_server_requests_seconds_sum          # è¯·æ±‚æ€»è€—æ—¶
http_server_requests_seconds_max          # æœ€å¤§å“åº”æ—¶é—´
```

**ç³»ç»ŸæŒ‡æ ‡**
```
system_cpu_usage                          # ç³»ç»Ÿ CPU ä½¿ç”¨ç‡
process_cpu_usage                         # è¿›ç¨‹ CPU ä½¿ç”¨ç‡
system_load_average_1m                    # ç³»ç»Ÿè´Ÿè½½
```

#### Grafana é¢æ¿æ¨è

1. **Spring Boot 2.1 Statistics** (Dashboard ID: 6756)
2. **JVM (Micrometer)** (Dashboard ID: 4701)
3. **Spring Boot APM Dashboard** (Dashboard ID: 12900)

å¯¼å…¥æ–¹å¼ï¼šGrafana â†’ Dashboards â†’ Import â†’ è¾“å…¥ Dashboard ID

### ğŸ“š è¯¦ç»†ç›‘æ§æ–‡æ¡£

- [Actuator è®¿é—®æŒ‡å—](docs/actuator-access-guide.md)
- [è‡ªå®šä¹‰ç›‘æ§é›†æˆ](docs/CUSTOM_MONITORING_GUIDE.md)
- [æ€§èƒ½ç›‘æ§æœ€ä½³å®è·µ](docs/PERFORMANCE_MONITORING_INTEGRATION.md)
- [æ•°æ®åº“ç›‘æ§é…ç½®](docs/database-monitoring-fixes.md)


## ğŸ® å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### Maven å‘½ä»¤

```bash
# æ¸…ç†ç¼–è¯‘
mvn clean install

# è·³è¿‡æµ‹è¯•ç¼–è¯‘
mvn clean install -DskipTests

# è¿è¡Œæµ‹è¯•
mvn test

# æ‰“åŒ…åº”ç”¨
mvn package

# è¿è¡Œåº”ç”¨
mvn spring-boot:run

# æŸ¥çœ‹ä¾èµ–æ ‘
mvn dependency:tree

# æ›´æ–°ä¾èµ–
mvn versions:display-dependency-updates
```

### Docker å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f [service_name]

# åœæ­¢æœåŠ¡
docker-compose stop

# é‡å¯æœåŠ¡
docker-compose restart [service_name]

# åˆ é™¤å®¹å™¨å’Œç½‘ç»œ
docker-compose down

# åˆ é™¤å®¹å™¨ã€ç½‘ç»œå’Œå·
docker-compose down -v

# é‡æ–°æ„å»ºé•œåƒ
docker-compose build --no-cache

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

### Git å‘½ä»¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/rymcu/mortise.git

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature

# æäº¤æ›´æ”¹
git add .
git commit -m "feat: your feature description"

# æ¨é€åˆ°è¿œç¨‹
git push origin feature/your-feature

# åŒæ­¥ä¸Šæ¸¸
git fetch upstream
git rebase upstream/master
```

### Redis å‘½ä»¤

```bash
# è¿æ¥ Redis
redis-cli

# æŸ¥çœ‹æ‰€æœ‰é”®
KEYS *

# æŸ¥çœ‹é”®å€¼
GET key_name

# åˆ é™¤é”®
DEL key_name

# æ¸…ç©ºæ•°æ®åº“
FLUSHDB

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
INFO memory
```

### PostgreSQL å‘½ä»¤

```bash
# è¿æ¥æ•°æ®åº“
psql -U mortise -d mortise

# æŸ¥çœ‹æ‰€æœ‰è¡¨
\dt

# æŸ¥çœ‹è¡¨ç»“æ„
\d table_name

# æ‰§è¡Œ SQL æ–‡ä»¶
\i path/to/file.sql

# å¯¼å‡ºæ•°æ®åº“
pg_dump -U mortise mortise > backup.sql

# å¯¼å…¥æ•°æ®åº“
psql -U mortise mortise < backup.sql
```

---

## ğŸ“š æ–‡æ¡£ä¸­å¿ƒ

é¡¹ç›®åŒ…å« **50+ ä»½**è¯¦ç»†æŠ€æœ¯æ–‡æ¡£ï¼Œä½äº [`docs/`](docs/) ç›®å½•ã€‚

### ğŸš€ å¿«é€Ÿå¼€å§‹
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/quickstart/QUICK_START.md) - ä¸‰æ­¥å¿«é€Ÿå¯åŠ¨é¡¹ç›®
- [ç³»ç»Ÿè¿ç§»æŒ‡å—](docs/migration/mortise-system-migration-guide.md) - æ¨¡å—è¿ç§»å®Œæ•´æµç¨‹

### ğŸ—ï¸ æ¶æ„è®¾è®¡
- [æ¶æ„è¯´æ˜](docs/architecture/architecture.md) - åˆ†å±‚ä¸æ¨¡å—èŒè´£
- [é¡¹ç›®æ¶æ„ä¼˜åŒ–](docs/architecture/project-architecture-optimization.md) - æ•´ä½“æ¶æ„è®¾è®¡
- [æ¨¡å—ä¾èµ–ä¸ SPI æ¶æ„](docs/architecture/module-dependency-and-spi-architecture.md) - æ¨¡å—åŒ–è®¾è®¡åŸåˆ™
- [æ¶æ„é‡æ„è®¡åˆ’](docs/architecture/ARCHITECTURE_REFACTOR_PLAN.md) - é‡æ„è·¯çº¿å›¾

### ğŸ“Œ éœ€æ±‚è§„èŒƒ (spec-kit)
- [è§„èŒƒä¸­å¿ƒ](docs/specs/README.md) - è§„èŒƒç›®å½•ä¸å‘½åè§„åˆ™
- [è½åœ°æµç¨‹](docs/specs/WORKFLOW.md) - è§„èŒƒå…ˆè¡Œæµç¨‹
- [è§„èŒƒæ¨¡æ¿](docs/specs/templates/feature-spec.md) - æ–°éœ€æ±‚æ¨¡æ¿

### ğŸ”§ é…ç½®ä¸ä¼˜åŒ–
- [Spring Boot è‡ªåŠ¨é…ç½®ä¼˜åŒ–](docs/configuration/spring-boot-autoconfiguration-optimization.md)
- [æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–](docs/database/database-performance-optimization.md)
- [MyBatis-Flex é…ç½®æŒ‡å—](docs/configuration/mybatis-flex-config-fixes.md)
- [å¾ªç¯ä¾èµ–ä¿®å¤æ–¹æ¡ˆ](docs/configuration/circular-dependency-fixes.md)
- [åº”ç”¨å¯åŠ¨æ—¶é—´ä¼˜åŒ–](docs/performance/app-startup-time-fix.md)

### ğŸ§ª ç¼“å­˜ç³»ç»Ÿ
- [ç¼“å­˜ç»Ÿä¸€å®ç°æŠ¥å‘Š](docs/caching/cache-unification-complete-report.md)
- [ç¼“å­˜ä¼˜åŒ–æŒ‡å—](docs/caching/cache-optimization-guide.md)
- [ç¼“å­˜è¿‡æœŸ SPI æŒ‡å—](docs/caching/cache-expiration-spi-guide.md)
- [Redis é”®è¿‡æœŸç›‘å¬å‡çº§](docs/caching/redis-key-expiration-listener-upgrade.md)
- [å­—å…¸ç¼“å­˜å®ç°](docs/caching/dict-cache-implementation.md)

### ğŸ“Š ç›‘æ§ä¸è¿ç»´
- [Actuator è®¿é—®æŒ‡å—](docs/monitoring/actuator-access-guide.md)
- [è‡ªå®šä¹‰ç›‘æ§é›†æˆ](docs/monitoring/CUSTOM_MONITORING_GUIDE.md)
- [æ€§èƒ½ç›‘æ§æœ€ä½³å®è·µ](docs/monitoring/PERFORMANCE_MONITORING_INTEGRATION.md)
- [æ•°æ®åº“ç›‘æ§é…ç½®](docs/monitoring/database-monitoring-fixes.md)
- [å¥åº·æ£€æŸ¥é…ç½®](docs/monitoring/health-check-config-fixes.md)
- [ç›‘æ§æ¶æ„æ€»ç»“](docs/monitoring/monitoring-architecture-summary.md)

### ğŸ›¡ï¸ å®‰å…¨ä¸é™æµ
- [é™æµæ–¹æ¡ˆå®ç°](docs/security/rate-limiting.md)
- [é™æµæ–¹æ¡ˆå¯¹æ¯”](docs/security/rate-limit-comparison.md)
- [é™æµè¿ç§»è®¡åˆ’](docs/security/RATELIMIT_MIGRATION_PLAN.md)
- [JWT å±æ€§é‡æ„](docs/security/jwt-properties-refactoring.md)
- [OAuth2 é…ç½®æŒ‡å—](docs/oauth2/oauth2-configuration-guide.md)
- [è®¤è¯ç®¡ç†å™¨ä¿®å¤](docs/security/authentication-manager-fix.md)

### ğŸ”„ è¿ç§»æŒ‡å—
- [ç³»ç»Ÿè¿ç§»æ£€æŸ¥æ¸…å•](docs/migration/mortise-system-migration-checklist.md)
- [ç³»ç»Ÿè¿ç§»è®¡åˆ’ V2](docs/migration/mortise-system-migration-plan-v2.md)
- [OAuth2 ç¼“å­˜æœåŠ¡è¿ç§»](docs/migration/oauth2-cache-service-migration.md)
- [OAuth2 åºåˆ—åŒ–å™¨è¿ç§»](docs/migration/oauth2-serializer-migration.md)
- [ç¼“å­˜è¿ç§»æ€»ç»“](docs/migration/CACHE_MIGRATION_SUMMARY.md)

### ğŸ“ˆ é¡¹ç›®æŠ¥å‘Š
- [ç¬¬ä¸€é˜¶æ®µæŠ¥å‘Š](docs/reports/PHASE1_REPORT.md)
- [ç¬¬ä¸‰é˜¶æ®µæŠ¥å‘Š](docs/reports/PHASE3_REPORT.md)
- [ç¬¬ä¸‰é˜¶æ®µæ€»ç»“](docs/reports/PHASE3_SUMMARY.md)
- [ç¬¬å››é˜¶æ®µæŠ¥å‘Š](docs/reports/PHASE4_REPORT.md)
- [ç¬¬äº”é˜¶æ®µæŠ¥å‘Š](docs/reports/PHASE5_REPORT.md)

### ğŸ› é—®é¢˜ä¿®å¤
- [é…ç½®é—®é¢˜ä¿®å¤](docs/configuration/configuration-fixes.md)
- [æœ€ç»ˆé…ç½®ä¿®å¤](docs/configuration/final-config-fixes.md)
- [MyBatis-Flex å‚æ•°ç»‘å®šä¿®å¤](docs/configuration/mybatisflex-parameter-binding-fix.md)
- [äº‹ä»¶ç›‘å¬å™¨æ—¶åºåˆ†æ](docs/refactor/event-listener-timing-analysis.md)

### ğŸ“– å®Œæ•´æ–‡æ¡£ç´¢å¼•
æŸ¥çœ‹å®Œæ•´æ–‡æ¡£åˆ—è¡¨ï¼š[docs/migration/MIGRATION_INDEX.md](docs/migration/MIGRATION_INDEX.md)

## ğŸ›ï¸ é¡¹ç›®æ¶æ„

### æ¨¡å—è¯´æ˜

```
mortise/                             # çˆ¶ POMï¼Œç‰ˆæœ¬ç®¡ç†ä¸æ¨¡å—èšåˆ
â”œâ”€â”€ mortise-common/                  # L1 å…¬å…±æ¨¡å— - é€šç”¨å·¥å…·ç±»ï¼ˆULID/BeanCopierï¼‰ã€å¼‚å¸¸ä½“ç³»ã€æšä¸¾å¸¸é‡
â”œâ”€â”€ mortise-core/                    # L1 æ ¸å¿ƒæ¨¡å— - ç»Ÿä¸€è¿”å› GlobalResultã€CurrentUser SPIã€JDK21 è™šæ‹Ÿçº¿ç¨‹ã€Jasypt åŠ å¯†
â”œâ”€â”€ mortise-log/                     # L2 æ—¥å¿—æ¨¡å— - @OperationLog/@ApiLog AOP æ³¨è§£ã€LogStorage SPIã€ClientTypeResolver è´£ä»»é“¾
â”œâ”€â”€ mortise-cache/                   # L2 ç¼“å­˜æ¨¡å— - CacheService ç»Ÿä¸€æŠ½è±¡ã€Redis å®ç°ã€CacheConfigurer/CacheExpirationHandler SPI
â”œâ”€â”€ mortise-notification/            # L2 é€šçŸ¥æ¨¡å— - NotificationSender SPIã€é‚®ä»¶/å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯ã€å¼‚æ­¥æ‰¹é‡å‘é€
â”œâ”€â”€ mortise-persistence/             # L2 æŒä¹…åŒ–æ¨¡å— - MyBatis-Flex é…ç½®ã€PostgreSQL JSONB/Duration ç±»å‹å¤„ç†å™¨ã€æ•°æ®åº“æ—¥å¿—å­˜å‚¨
â”œâ”€â”€ mortise-auth/                    # L3 è®¤è¯æ¨¡å— - JWTã€Spring Security 6ã€OAuth2 å¤šå¹³å°ã€çŸ­ä¿¡/æ‰«ç ç™»å½•ã€å¤šç”¨æˆ·è¡¨
â”œâ”€â”€ mortise-web-support/             # L3 Web æ”¯æ’‘ - @AdminController/@ApiControllerã€GlobalExceptionHandlerã€@RateLimitã€OpenAPI
â”œâ”€â”€ mortise-monitor/                 # L3 ç›‘æ§æ¨¡å— - Actuator ç«¯ç‚¹å®‰å…¨ã€Prometheus æŒ‡æ ‡ã€DB/Redis å¥åº·æ£€æŸ¥
â”œâ”€â”€ mortise-file/                    # L3 æ–‡ä»¶æ¨¡å— - x-file-storage é›†æˆã€é˜¿é‡Œäº‘ OSSã€åˆ†ç‰‡ä¸Šä¼ ã€æ–‡ä»¶å…ƒæ•°æ®ç®¡ç†
â”œâ”€â”€ mortise-wechat/                  # L3 å¾®ä¿¡æ¨¡å— - å¤šè´¦å·å…¬ä¼—å·ç®¡ç†ã€æ¶ˆæ¯è·¯ç”±ã€æ‰«ç ç™»å½•ã€æ¨¡æ¿æ¶ˆæ¯ã€å¼€æ”¾å¹³å°æ¥å…¥
â”œâ”€â”€ mortise-test-support/            # æµ‹è¯•æ”¯æ’‘ - å…±äº«æµ‹è¯•é…ç½®ä¸å·¥å…·
â”œâ”€â”€ mortise-system/                  # ç³»ç»ŸåŸŸèšåˆï¼ˆDDD åˆ†å±‚ï¼‰
â”‚   â”œâ”€â”€ mortise-system-domain/       # L4 é¢†åŸŸå±‚ - User/Role/Menu/Dict/DictType å®ä½“ã€@DictFormat æ³¨è§£
â”‚   â”œâ”€â”€ mortise-system-infra/        # L4 åŸºç¡€è®¾æ–½å±‚ - Mapper æ¥å£ã€SystemCacheConfigurerã€æ—¥å¿—å­˜å‚¨å®ç°
â”‚   â”œâ”€â”€ mortise-system-application/  # L4 åº”ç”¨å±‚ - UserService/AuthService/RoleService ç­‰ã€äº‹ä»¶é©±åŠ¨ï¼ˆç™»å½•/æ³¨å†Œ/é‡ç½®å¯†ç ï¼‰
â”‚   â”œâ”€â”€ mortise-system-admin/        # L5 ç®¡ç†ç«¯ API - ç³»ç»Ÿç®¡ç† REST æ¥å£ã€DictSerializer å­—å…¸ç¿»è¯‘ã€SecurityConfigurer
â”‚   â””â”€â”€ mortise-system-api/          # L5 å…¬å…± APIï¼ˆé¢„ç•™æ‰©å±•ï¼‰
â”œâ”€â”€ mortise-member/                  # ä¼šå‘˜åŸŸèšåˆï¼ˆDDD åˆ†å±‚ï¼‰
â”‚   â”œâ”€â”€ mortise-member-domain/       # L4 é¢†åŸŸå±‚ - Member/MemberOAuth2Binding å®ä½“
â”‚   â”œâ”€â”€ mortise-member-infra/        # L4 åŸºç¡€è®¾æ–½å±‚ - Mapper æ¥å£
â”‚   â”œâ”€â”€ mortise-member-application/  # L4 åº”ç”¨å±‚ - MemberServiceã€OAuth2 ç»‘å®šæœåŠ¡
â”‚   â”œâ”€â”€ mortise-member-admin/        # L5 ç®¡ç†ç«¯ API - ä¼šå‘˜ç®¡ç† REST æ¥å£
â”‚   â””â”€â”€ mortise-member-api/          # L5 å…¬å…± API - ä¼šå‘˜æ³¨å†Œ/ç™»å½•/OAuth2/æ–‡ä»¶ä¸Šä¼ æ¥å£ã€MemberDetailsService
â””â”€â”€ mortise-app/                     # L6 åº”ç”¨è£…é… - Spring Boot å¯åŠ¨å…¥å£ã€Flyway è¿ç§»ã€å¤šç¯å¢ƒé…ç½®
```

### æ¶æ„å›¾

```mermaid
flowchart TB
  subgraph L6[L6 åº”ç”¨å±‚]
    app[mortise-app<br/><i>Spring Boot å¯åŠ¨ Â· Flyway</i>]
  end

  subgraph L5[L5 ä¸šåŠ¡åŸŸ API]
    sysAdmin[mortise-system-admin]
    sysApi[mortise-system-api]
    memAdmin[mortise-member-admin]
    memApi[mortise-member-api]
  end

  subgraph L4[L4 ä¸šåŠ¡åŸŸåº”ç”¨ä¸åŸºç¡€è®¾æ–½]
    sysApp[mortise-system-application]
    sysInfra[mortise-system-infra]
    memApp[mortise-member-application]
    memInfra[mortise-member-infra]
    sysDomain[mortise-system-domain]
    memDomain[mortise-member-domain]
  end

  subgraph L3[L3 åº”ç”¨åŸºç¡€å±‚]
    auth[mortise-auth<br/><i>JWT Â· OAuth2 Â· SMS Â· QR</i>]
    webSupport[mortise-web-support<br/><i>@RateLimit Â· OpenAPI</i>]
    monitor[mortise-monitor<br/><i>Actuator Â· Prometheus</i>]
    file[mortise-file<br/><i>x-file-storage Â· OSS</i>]
    wechat[mortise-wechat<br/><i>å…¬ä¼—å· Â· å¼€æ”¾å¹³å°</i>]
  end

  subgraph L2[L2 åŸºç¡€è®¾æ–½å±‚]
    log[mortise-log<br/><i>@OperationLog Â· @ApiLog</i>]
    cache[mortise-cache<br/><i>Redis Â· SPI</i>]
    notify[mortise-notification<br/><i>é‚®ä»¶ Â· å¾®ä¿¡</i>]
    persistence[mortise-persistence<br/><i>MyBatis-Flex Â· JSONB</i>]
  end

  subgraph L1[L1 æ ¸å¿ƒå±‚]
    common[mortise-common<br/><i>å·¥å…· Â· å¼‚å¸¸ Â· æšä¸¾</i>]
    core[mortise-core<br/><i>GlobalResult Â· è™šæ‹Ÿçº¿ç¨‹</i>]
  end

  app --> sysAdmin & sysApi & memAdmin & memApi
  app --> auth & webSupport & monitor & file & wechat

  sysAdmin --> sysApp
  sysApi --> sysApp
  memAdmin --> memApp
  memApi --> memApp

  sysApp --> sysDomain & sysInfra
  memApp --> memDomain & memInfra

  sysInfra --> persistence & log & cache
  memInfra --> persistence

  wechat --> auth & cache & notify & webSupport
  file --> auth
  auth --> core & cache & persistence
  webSupport --> core & log & auth
  monitor --> common

  log --> core
  cache --> common
  notify --> common
  persistence --> log

  core --> common
```

### ä¾èµ–çŸ©é˜µï¼ˆç®€åŒ–ï¼‰

| å±‚çº§ | å…è®¸ä¾èµ– |
| --- | --- |
| L6 åº”ç”¨å±‚ | L1-L5 å…¨éƒ¨æ¨¡å— |
| L5 ä¸šåŠ¡åŸŸ API | L3-L4 ä¸æœ¬åŸŸ domain/application/infra |
| L4 ä¸šåŠ¡åŸŸåº”ç”¨ä¸åŸºç¡€è®¾æ–½ | L1-L3 ä¸æœ¬åŸŸ domain |
| L3 åº”ç”¨åŸºç¡€å±‚ | L1-L2 |
| L2 åŸºç¡€è®¾æ–½å±‚ | L1 |
| L1 æ ¸å¿ƒå±‚ | æ—  |

### æŠ€æœ¯ç‰¹è‰²

**ğŸ¯ SPI æ¶æ„è®¾è®¡ï¼ˆ12 ç»„ SPI æ¥å£ï¼‰**

é¡¹ç›®å…¨é¢é‡‡ç”¨ SPIï¼ˆService Provider Interfaceï¼‰æœºåˆ¶ï¼Œå®ç°æ¨¡å—é—´æ¾è€¦åˆä¸çƒ­æ’æ‹”æ‰©å±•ï¼š

| SPI æ¥å£ | æ‰€å±æ¨¡å— | ç”¨é€” | å·²æœ‰å®ç° |
|---|---|---|---|
| `LogStorage` | mortise-log | æ—¥å¿—å­˜å‚¨ç­–ç•¥ | DatabaseLogStorageã€SystemLogStorage |
| `ClientTypeResolver` | mortise-log | å®¢æˆ·ç«¯ç±»å‹è¯†åˆ« | DefaultClientTypeResolver |
| `CacheConfigurer` | mortise-cache | æ¨¡å—ç¼“å­˜ TTL æ³¨å†Œ | SystemCacheConfigurerã€AuthCacheConfigurer |
| `CacheExpirationHandler` | mortise-cache | ç¼“å­˜è¿‡æœŸäº‹ä»¶å¤„ç† | UserOnlineStatusExpirationHandler |
| `SecurityConfigurer` | mortise-auth | æ¨¡å—å®‰å…¨è§„åˆ™æ³¨å†Œ | System/App/Web/Monitor/File/WeChat å…± 6 ä¸ªå®ç° |
| `CustomUserDetailsService` | mortise-auth | å¤šç”¨æˆ·è¡¨è®¤è¯ | UserDetailsServiceImplã€MemberDetailsServiceImpl |
| `UserTypeResolver` | mortise-auth | ç”¨æˆ·ç±»å‹è¯†åˆ« | DefaultUserTypeResolver |
| `OAuth2ProviderStrategy` | mortise-auth | OAuth2 å¹³å°é€‚é… | GitHub/Google/WeChat/Logto å…± 4 ä¸ªå®ç° |
| `OAuth2LoginSuccessHandlerProvider` | mortise-auth | OAuth2 ç™»å½•æˆåŠŸå¤„ç† | System/Api å…± 2 ä¸ªå®ç° |
| `NotificationSender` | mortise-notification | é€šçŸ¥æ¸ é“æ‰©å±• | EmailNotificationSenderã€WeChatNotificationSender |
| `JacksonConfigurer` | mortise-web-support | Jackson åºåˆ—åŒ–æ‰©å±• | DictJacksonConfigurer |
| `CurrentUser` | mortise-core | å½“å‰ç”¨æˆ·æŠ½è±¡ | UserDetailInfoã€MemberDetailInfo |

**ğŸ”„ ç¼“å­˜è¿‡æœŸç­–ç•¥**
- ç»Ÿä¸€è¿‡æœŸæ—¶é—´ç®¡ç†ï¼ˆ`CacheConfigurer` SPI æ¯æ¨¡å—ç‹¬ç«‹æ³¨å†Œï¼‰
- Redis Keyspace Notification ç›‘å¬é”®è¿‡æœŸ
- `CacheExpirationHandler` SPI è‡ªåŠ¨åˆ†å‘è¿‡æœŸäº‹ä»¶

**ğŸ“Š å¯è§‚æµ‹æ€§**
- Spring Boot Actuator ç«¯ç‚¹ + JWT å®‰å…¨ä¿æŠ¤
- Prometheus æŒ‡æ ‡å¯¼å‡º + å…¬å…±æ ‡ç­¾
- HikariCP è¿æ¥æ±  / Redis / DB è‡ªå®šä¹‰å¥åº·æŒ‡æ ‡
- åº”ç”¨å¯åŠ¨è€—æ—¶ç›‘æ§

**ğŸ›¡ï¸ å®‰å…¨ä¿éšœ**
- JWT Token è®¤è¯ + Token åˆ·æ–°
- OAuth2 å¤šå¹³å°ç™»å½•ï¼ˆGitHub / Google / Logto / å¾®ä¿¡ï¼‰
- SMS éªŒè¯ç ç™»å½• + æ‰«ç ç™»å½•
- Spring Security æ–¹æ³•çº§æƒé™æ§åˆ¶
- Jasypt é…ç½®åŠ å¯†
- Resilience4j `@RateLimit` æ³¨è§£é™æµï¼ˆIP / ç”¨æˆ· / æ–¹æ³• / SpELï¼‰

**âš¡ é«˜æ€§èƒ½è®¾è®¡**
- JDK 21 è™šæ‹Ÿçº¿ç¨‹ä½œä¸ºé»˜è®¤å¼‚æ­¥æ‰§è¡Œå™¨
- MyBatis-Flex è½»é‡çº§ ORM + PostgreSQL JSONB åŸç”Ÿæ”¯æŒ
- Redis ç¼“å­˜ + é”®è¿‡æœŸè‡ªåŠ¨å¤„ç†
- Flyway ç‰ˆæœ¬åŒ–æ•°æ®åº“è¿ç§»

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿å¹¶æ„Ÿè°¢ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

### ğŸŒŸ å¦‚ä½•è´¡çŒ®

#### æŠ¥å‘Šé—®é¢˜
- åœ¨ [GitHub Issues](https://github.com/rymcu/mortise/issues) åˆ›å»º Issue
- æ¸…æ™°æè¿°é—®é¢˜ã€é‡ç°æ­¥éª¤ã€æœŸæœ›è¡Œä¸º
- æä¾›é”™è¯¯æ—¥å¿—ã€æˆªå›¾ç­‰ç›¸å…³ä¿¡æ¯

#### æäº¤åŠŸèƒ½å»ºè®®
- åœ¨ [GitHub Discussions](https://github.com/rymcu/mortise/discussions) å‘èµ·è®¨è®º
- è¯´æ˜åŠŸèƒ½çš„ä½¿ç”¨åœºæ™¯å’Œä»·å€¼
- æä¾›å‚è€ƒå®ç°æˆ–è®¾è®¡æ€è·¯

#### ä»£ç è´¡çŒ®æµç¨‹

1. **Fork é¡¹ç›®**
   ```bash
   # Fork åå…‹éš†åˆ°æœ¬åœ°
   git clone https://github.com/YOUR_USERNAME/mortise.git
   cd mortise
   ```

2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/amazing-feature
   # æˆ–ä¿®å¤åˆ†æ”¯
   git checkout -b fix/bug-description
   ```

3. **ç¼–å†™ä»£ç **
   - éµå¾ªé¡¹ç›®ä»£ç è§„èŒƒ
   - æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
   - ç¼–å†™å•å…ƒæµ‹è¯•

4. **æäº¤å˜æ›´**
   ```bash
   git add .
   git commit -m 'feat: add amazing feature'
   # ä½¿ç”¨ Conventional Commits è§„èŒƒ
   ```

5. **åŒæ­¥ä¸Šæ¸¸ä»£ç **
   ```bash
   git remote add upstream https://github.com/rymcu/mortise.git
   git fetch upstream
   git rebase upstream/master
   ```

6. **æ¨é€åˆ° GitHub**
   ```bash
   git push origin feature/amazing-feature
   ```

7. **åˆ›å»º Pull Request**
   - è®¿é—® GitHub ä»“åº“é¡µé¢
   - ç‚¹å‡» "New Pull Request"
   - å¡«å†™ PR æè¿°ã€å…³è” Issue
   - ç­‰å¾…ä»£ç å®¡æŸ¥

### ğŸ“ å¼€å‘è§„èŒƒ

**ä»£ç é£æ ¼**
- éµå¾ª [é˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c)
- ä½¿ç”¨ IDE æ ¼å¼åŒ–å·¥å…·ï¼ˆæä¾›é…ç½®æ–‡ä»¶ï¼‰
- ç±»ã€æ–¹æ³•æ·»åŠ  Javadoc æ³¨é‡Š

**æäº¤ä¿¡æ¯è§„èŒƒ**

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) æ ¼å¼ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type ç±»å‹ï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `docs`: æ–‡æ¡£å˜æ›´
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `refactor`: é‡æ„ï¼ˆä¸å¢åŠ åŠŸèƒ½ä¸ä¿®å¤ Bugï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»ºå·¥å…·ã€ä¾èµ–ç®¡ç†

**ç¤ºä¾‹ï¼š**
```bash
feat(auth): add password encryption support

- Implement BCrypt password encoder
- Add password strength validation
- Update user registration flow

Closes #123
```

**æµ‹è¯•è¦æ±‚**
- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«å•å…ƒæµ‹è¯•
- æµ‹è¯•è¦†ç›–ç‡ä¸ä½äº 70%
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

**æ–‡æ¡£è¦æ±‚**
- æ–°åŠŸèƒ½éœ€è¦æ›´æ–°ç›¸å…³æ–‡æ¡£
- API å˜æ›´éœ€è¦æ›´æ–°æ¥å£æ–‡æ¡£
- é‡è¦å˜æ›´éœ€è¦åœ¨ CHANGELOG.md è®°å½•

### ğŸ” ä»£ç å®¡æŸ¥

æ‰€æœ‰ Pull Request éƒ½éœ€è¦ç»è¿‡ä»£ç å®¡æŸ¥ï¼š
- è‡³å°‘ 1 ä½ç»´æŠ¤è€…å®¡æ‰¹
- é€šè¿‡æ‰€æœ‰ CI æ£€æŸ¥
- è§£å†³æ‰€æœ‰å®¡æŸ¥æ„è§
- ä¿æŒæäº¤å†å²æ¸…æ™°

## ğŸ“ ç¤¾åŒºä¸æ”¯æŒ

### ğŸ’¬ è·å–å¸®åŠ©

| æ¸ é“ | ç”¨é€” | å“åº”æ—¶é—´ |
|------|------|----------|
| ğŸ“– [æŠ€æœ¯æ–‡æ¡£](docs/) | æŸ¥é˜…è¯¦ç»†æ–‡æ¡£ | å³æ—¶ |
| ğŸ› [GitHub Issues](https://github.com/rymcu/mortise/issues) | Bug æŠ¥å‘Šã€é—®é¢˜è¿½è¸ª | 1-3 å¤© |
| ğŸ’¡ [GitHub Discussions](https://github.com/rymcu/mortise/discussions) | åŠŸèƒ½å»ºè®®ã€æŠ€æœ¯è®¨è®º | 3-7 å¤© |
| ğŸ“§ Email | å•†åŠ¡åˆä½œã€ç§å¯†é—®é¢˜ | 7 å¤©å†… |

### ğŸŒ ç¤¾åŒºèµ„æº

- **å®˜æ–¹ç½‘ç«™**: https://rymcu.com
- **åœ¨çº¿æ¼”ç¤º**: _å³å°†ä¸Šçº¿_
- **API æ–‡æ¡£**: _å¼€å‘ä¸­_
- **è§†é¢‘æ•™ç¨‹**: _è®¡åˆ’ä¸­_

### â“ å¸¸è§é—®é¢˜

<details>
<summary><b>Q: æ”¯æŒå“ªäº›æ•°æ®åº“ï¼Ÿ</b></summary>

A: ç›®å‰æ”¯æŒ PostgreSQLï¼ˆæ¨èï¼‰å’Œ MySQLã€‚æ¨èä½¿ç”¨ PostgreSQL 17ï¼Œæ€§èƒ½å’ŒåŠŸèƒ½æ›´å®Œå–„ã€‚
</details>

<details>
<summary><b>Q: å¯ä»¥ç”¨äºå•†ä¸šé¡¹ç›®å—ï¼Ÿ</b></summary>

A: å¯ä»¥ã€‚æœ¬é¡¹ç›®åŸºäº MIT åè®®ï¼Œå¯å…è´¹ç”¨äºå•†ä¸šé¡¹ç›®ã€‚
</details>

<details>
<summary><b>Q: å¦‚ä½•å‡çº§ Spring Boot ç‰ˆæœ¬ï¼Ÿ</b></summary>

A: ä¿®æ”¹ `pom.xml` ä¸­çš„ `spring-boot-starter-parent` ç‰ˆæœ¬ï¼Œç„¶åæ‰§è¡Œ `mvn clean install` æµ‹è¯•å…¼å®¹æ€§ã€‚
</details>

<details>
<summary><b>Q: ç›‘æ§ç«¯ç‚¹éœ€è¦è®¤è¯å—ï¼Ÿ</b></summary>

A: æ˜¯çš„ã€‚æ‰€æœ‰ Actuator ç«¯ç‚¹éƒ½éœ€è¦ JWT Token è®¤è¯ï¼Œç¡®ä¿ç”Ÿäº§ç¯å¢ƒå®‰å…¨ã€‚
</details>

<details>
<summary><b>Q: å¦‚ä½•è‡ªå®šä¹‰ç¼“å­˜å®ç°ï¼Ÿ</b></summary>

A: å®ç° `CacheConfigurer` æ¥å£æ³¨å†Œæ¨¡å—ç¼“å­˜ TTLï¼Œæˆ–å®ç° `CacheExpirationHandler` å¤„ç†è¿‡æœŸäº‹ä»¶ã€‚å‚è€ƒ [ç¼“å­˜è¿‡æœŸ SPI æŒ‡å—](docs/caching/cache-expiration-spi-guide.md)ã€‚
</details>

## ï¿½ é¡¹ç›®çŠ¶æ€

![GitHub stars](https://img.shields.io/github/stars/rymcu/mortise?style=social)
![GitHub forks](https://img.shields.io/github/forks/rymcu/mortise?style=social)
![GitHub issues](https://img.shields.io/github/issues/rymcu/mortise)
![GitHub license](https://img.shields.io/github/license/rymcu/mortise)
![Java version](https://img.shields.io/badge/Java-21-orange)
![Spring Boot version](https://img.shields.io/badge/Spring%20Boot-3.5.7-brightgreen)

### ğŸ“… ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | ä¸»è¦æ›´æ–° |
|------|----------|----------|
| v0.0.1 | 2024-09-24 | ğŸ‰ é¦–æ¬¡å‘å¸ƒï¼šæ ¸å¿ƒåŠŸèƒ½ã€åŸºç¡€æ¶æ„ |
| v0.2.0 | 2025-12 | ğŸš€ å…¨é¢åŠŸèƒ½å®Œå–„ï¼šOAuth2 å¤šå¹³å°ã€å¾®ä¿¡é›†æˆã€æ–‡ä»¶ç®¡ç†ã€æ—¥å¿—å®¡è®¡ã€é€šçŸ¥ç³»ç»Ÿã€SPI æ¶æ„ |

### ğŸ—ºï¸ å‘å±•è·¯çº¿å›¾

```
v0.0.1 (âœ… å·²å®Œæˆ)
â”œâ”€ ç”¨æˆ·ã€è§’è‰²ã€èœå•ç®¡ç†
â”œâ”€ JWT è®¤è¯æˆæƒ
â”œâ”€ Redis ç¼“å­˜é›†æˆ
â”œâ”€ Actuator ç›‘æ§
â””â”€ åŸºç¡€æ–‡æ¡£

v0.2.0 (âœ… å·²å®Œæˆ)
â”œâ”€ æ“ä½œæ—¥å¿— (@OperationLog/@ApiLog AOP + SPI å­˜å‚¨)
â”œâ”€ æ–‡ä»¶ä¸Šä¼ ç®¡ç† (x-file-storage + é˜¿é‡Œäº‘ OSS)
â”œâ”€ SpringDoc OpenAPI 3 API æ–‡æ¡£
â”œâ”€ é€šçŸ¥ç³»ç»Ÿ (é‚®ä»¶ + å¾®ä¿¡æ¨¡æ¿æ¶ˆæ¯ SPI)
â”œâ”€ OAuth2 å¤šå¹³å°ç™»å½• (GitHub/Google/Logto/å¾®ä¿¡)
â”œâ”€ çŸ­ä¿¡éªŒè¯ç  / æ‰«ç ç™»å½•
â”œâ”€ å¾®ä¿¡å…¬ä¼—å· & å¼€æ”¾å¹³å°é›†æˆ
â”œâ”€ ä¼šå‘˜æ¨¡å— (DDD åˆ†å±‚)
â”œâ”€ Resilience4j @RateLimit æ³¨è§£é™æµ
â”œâ”€ 12 ç»„ SPI æ¥å£å®Œæ•´å®ç°
â”œâ”€ JDK 21 è™šæ‹Ÿçº¿ç¨‹ & æ€§èƒ½ä¼˜åŒ–
â”œâ”€ Prometheus + Grafana ç›‘æ§ä½“ç³»
â””â”€ PostgreSQL JSONB / Flyway æ•°æ®åº“è¿ç§»

v0.3.0 (ğŸ“‹ è®¡åˆ’ä¸­ - é¢„è®¡ Q2 2026)
â”œâ”€ æ”¯ä»˜é›†æˆ (å¾®ä¿¡æ”¯ä»˜ / æ”¯ä»˜å®)
â”œâ”€ å·¥ä½œæµå¼•æ“ (Flowable)
â”œâ”€ å¤šç§Ÿæˆ·æ”¯æŒ
â”œâ”€ å‰ç«¯ç®¡ç†ç•Œé¢
â””â”€ å•å…ƒæµ‹è¯•è¦†ç›–æå‡

v1.0.0 (ğŸ¯ ç›®æ ‡ - é¢„è®¡ Q4 2026)
â”œâ”€ ç”Ÿäº§å°±ç»ªè®¤è¯
â”œâ”€ å®Œæ•´æµ‹è¯•è¦†ç›–
â”œâ”€ æ€§èƒ½åŸºå‡†æµ‹è¯•
â”œâ”€ å®‰å…¨åŠ å›º
â””â”€ è¯¦å°½ä½¿ç”¨æ‰‹å†Œ

v2.0.0 (ğŸ’¡ å±•æœ›)
â”œâ”€ å¾®æœåŠ¡æ¶æ„ (Spring Cloud)
â”œâ”€ æ¶ˆæ¯é˜Ÿåˆ— (RocketMQ/Kafka)
â”œâ”€ åˆ†å¸ƒå¼äº‹åŠ¡ (Seata)
â”œâ”€ å…¨æ–‡æœç´¢ (Elasticsearch)
â””â”€ å¤§æ•°æ®åˆ†æ
```

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº **[MIT License](./LICENSE)** å¼€æºåè®®ã€‚

```
MIT License

Copyright (c) 2024 RYMCU

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...
```

### ä½¿ç”¨è®¸å¯

âœ… å•†ä¸šä½¿ç”¨  
âœ… ä¿®æ”¹  
âœ… åˆ†å‘  
âœ… ç§äººä½¿ç”¨  

âš ï¸ éœ€ä¿ç•™ç‰ˆæƒå£°æ˜  
âš ï¸ éœ€ä¿ç•™è®¸å¯å£°æ˜  

## ğŸ™ è‡´è°¢

### è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼š

[![Contributors](https://contrib.rocks/image?repo=rymcu/mortise&max=1000)](https://github.com/rymcu/mortise/graphs/contributors)

### æŠ€æœ¯æ ˆè‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®æ„å»ºï¼š

- [Spring Boot](https://spring.io/projects/spring-boot) - åº”ç”¨æ¡†æ¶
- [Spring Security](https://spring.io/projects/spring-security) - å®‰å…¨æ¡†æ¶
- [MyBatis-Flex](https://mybatis-flex.com/) - ORM æ¡†æ¶
- [Redis](https://redis.io/) - ç¼“å­˜æ•°æ®åº“
- [PostgreSQL](https://www.postgresql.org/) - å…³ç³»å‹æ•°æ®åº“
- [Resilience4j](https://resilience4j.readme.io/) - å®¹é”™åº“
- [Prometheus](https://prometheus.io/) - ç›‘æ§ç³»ç»Ÿ
- [Grafana](https://grafana.com/) - å¯è§†åŒ–å¹³å°

### ç‰¹åˆ«æ„Ÿè°¢

- æ„Ÿè°¢ JetBrains æä¾›çš„å¼€æºè®¸å¯è¯
- æ„Ÿè°¢æ‰€æœ‰æä¾›åé¦ˆå’Œå»ºè®®çš„ç”¨æˆ·

## ğŸ”— ç›¸å…³é“¾æ¥

### ğŸ“Œ é¡¹ç›®èµ„æº

| èµ„æº | é“¾æ¥ | æè¿° |
|------|------|------|
| ğŸ  é¡¹ç›®ä¸»é¡µ | [GitHub](https://github.com/rymcu/mortise) | æºä»£ç ä»“åº“ |
| ğŸ“– æ–‡æ¡£ä¸­å¿ƒ | [Docs](https://github.com/rymcu/mortise/tree/master/docs) | å®Œæ•´æŠ€æœ¯æ–‡æ¡£ |
| ğŸ› é—®é¢˜è¿½è¸ª | [Issues](https://github.com/rymcu/mortise/issues) | Bug æŠ¥å‘Šä¸åŠŸèƒ½è¯·æ±‚ |
| ğŸ’¬ è®¨è®ºåŒº | [Discussions](https://github.com/rymcu/mortise/discussions) | æŠ€æœ¯è®¨è®ºä¸äº¤æµ |
| ğŸ“ å˜æ›´æ—¥å¿— | [Releases](https://github.com/rymcu/mortise/releases) | ç‰ˆæœ¬å‘å¸ƒè®°å½• |
| ğŸ‘¥ è´¡çŒ®è€… | [Contributors](https://github.com/rymcu/mortise/graphs/contributors) | é¡¹ç›®è´¡çŒ®è€…åˆ—è¡¨ |
| ğŸ“Š ä»£ç ç»Ÿè®¡ | [Insights](https://github.com/rymcu/mortise/pulse) | é¡¹ç›®æ´»è·ƒåº¦ç»Ÿè®¡ |

### ğŸŒŸ Star History

[![Star History Chart](https://api.star-history.com/svg?repos=rymcu/mortise&type=Date)](https://star-history.com/#rymcu/mortise&Date)

### ğŸ”— ç›¸å…³é¡¹ç›®

- [Nebula](https://github.com/rymcu/nebula) - RYMCU ç¤¾åŒºå‰ç«¯é¡¹ç›®
- [Forest](https://github.com/rymcu/forest) - RYMCU ç¤¾åŒºåç«¯é¡¹ç›®

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by [RYMCU](https://github.com/rymcu)

**æœ€åæ›´æ–°**: 2026-02-10  
**å½“å‰ç‰ˆæœ¬**: v0.2.0  
**ç»´æŠ¤è€…**: [RYMCU å¼€å‘å›¢é˜Ÿ](https://github.com/rymcu)

</div>
