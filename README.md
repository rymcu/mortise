<pre align="center">

â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â•šâ•â•â–ˆâ–ˆâ•”â•â•â• â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•â•â• â–ˆâ–ˆâ•”â•â•â•â•â•
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â•šâ•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â•â•  
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
â•šâ•â•     â•šâ•â•  â•šâ•â•â•â•â•â•  â•šâ•â•  â•šâ•â•    â•šâ•â•    â•šâ•â• â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•


Built by RYMCU
</pre>

## Introduction

ä¸€æ¬¾ç°ä»£åŒ–çš„åå°ç®¡ç†è„šæ‰‹æ¶é¡¹ç›®ï¼ŒåŸºäº Spring Boot 3.5.6 æ„å»ºï¼Œé›†æˆäº†å®Œæ•´çš„è®¤è¯æˆæƒã€ç›‘æ§ã€ç¼“å­˜ç­‰ä¼ä¸šçº§åŠŸèƒ½ã€‚

### ğŸš€ æŠ€æœ¯æ ˆ

**åç«¯æ ¸å¿ƒ**
- **Spring Boot 3.5.6** - ä¸»æ¡†æ¶
- **Spring Security 6** - å®‰å…¨è®¤è¯æ¡†æ¶
- **JWT (JJWT 0.12.5)** - Token è®¤è¯
- **MyBatis-Flex 1.11.0** - ORM æ¡†æ¶
- **Redis** - ç¼“å­˜ä¸ä¼šè¯å­˜å‚¨
- **PostgreSQL 17** - ä¸»æ•°æ®åº“

**ç›‘æ§ä¸è¿ç»´**
- **Spring Boot Actuator** - åº”ç”¨ç›‘æ§
- **Prometheus** - æŒ‡æ ‡æ”¶é›†
- **Grafana** - ç›‘æ§é¢æ¿
- **HikariCP** - æ•°æ®åº“è¿æ¥æ± ç›‘æ§

**å…¶ä»–ç»„ä»¶**
- **Resilience4j** - é™æµç†”æ–­
- **Jasypt** - é…ç½®åŠ å¯†
- **Apache Commons** - å·¥å…·åº“é›†åˆ
- **X-File-Storage** - æ–‡ä»¶å­˜å‚¨

## Features

### âœ… å·²å®ç°åŠŸèƒ½
- [x] **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†
- [x] **è§’è‰²ç®¡ç†** - è§’è‰²å®šä¹‰ã€æƒé™åˆ†é…
- [x] **èœå•ç®¡ç†** - åŠ¨æ€èœå•ã€å±‚çº§ç®¡ç†
- [x] **æƒé™ç®¡ç†** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
- [x] **JWT è®¤è¯** - æ— çŠ¶æ€è®¤è¯æœºåˆ¶
- [x] **Redis ç¼“å­˜** - æ•°æ®ç¼“å­˜ä¸ä¼šè¯ç®¡ç†
- [x] **ç›‘æ§é›†æˆ** - Actuator + Prometheus + Grafana
- [x] **é™æµä¿æŠ¤** - Resilience4j å®ç°
- [x] **é…ç½®åŠ å¯†** - æ•æ„Ÿé…ç½®åŠ å¯†å­˜å‚¨
- [x] **æ–‡æ¡£å®Œå–„** - è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£

### ğŸš§ å¼€å‘ä¸­åŠŸèƒ½
- [ ] **å­—å…¸ç®¡ç†** - ç³»ç»Ÿå­—å…¸é…ç½®
- [ ] **äº‹ä»¶æ—¥å¿—** - æ“ä½œå®¡è®¡æ—¥å¿—
- [ ] **å¯¹è±¡å­˜å‚¨** - æ–‡ä»¶ä¸Šä¼ ç®¡ç†
- [ ] **API æ–‡æ¡£** - Swagger/OpenAPI é›†æˆ

## Requirements

### ğŸ’» å¼€å‘ç¯å¢ƒ
- **Java**: Eclipse Temurin 21
- **æ•°æ®åº“**: PostgreSQL 17 (æ¨è) / MySQL 8.0+
- **æ„å»ºå·¥å…·**: Maven 3.6.0+
- **ç¼“å­˜**: Redis 6.0+
- **IDE**: IntelliJ IDEA / Eclipse

### ğŸ³ è¿è¡Œç¯å¢ƒ
- **Docker & Docker Compose** (æ¨è)
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS, Linux

## ğŸš€ Quick Start

### æ–¹å¼ä¸€ï¼šDocker Compose (æ¨è)

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/rymcu/mortise.git
   cd mortise
   ```

2. **é…ç½®æœ¬åœ°åŸŸå**
   ```bash
   # Windows
   .\update_hosts.bat
   
   # macOS/Linux
   ./update_hosts.sh
   ```

3. **ç”Ÿæˆ SSL è¯ä¹¦**
   ```bash
   # å®‰è£… mkcert
   # Windows: choco install mkcert
   # macOS: brew install mkcert
   # Linux: å‚è€ƒå®˜æ–¹æ–‡æ¡£
   
   # ç”Ÿæˆè¯ä¹¦
   mkcert -install
   mkcert -key-file key.pem -cert-file cert.pem rymcu.local *.rymcu.local
   ```

4. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose up -d
   ```

5. **é…ç½®ä»£ç†ç®¡ç†å™¨**
   - è®¿é—® `http://localhost:81`
   - é»˜è®¤è´¦å·: `admin@example.com` / `changeme`
   - æ·»åŠ ä»£ç†è§„åˆ™:
     - `npm.rymcu.local` â†’ `app:81`
     - `auth.rymcu.local` â†’ `logto:3010`
     - `logto.rymcu.local` â†’ `logto:3011`
     - `rymcu.local` â†’ `app:80`

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘

1. **ç¯å¢ƒå‡†å¤‡**
   ```bash
   # ç¡®ä¿å·²å®‰è£… Java 21, Maven, PostgreSQL, Redis
   java -version
   mvn -version
   ```

2. **æ•°æ®åº“é…ç½®**
   ```sql
   -- PostgreSQL
   CREATE DATABASE mortise;
   CREATE USER mortise WITH PASSWORD 'your_password';
   GRANT ALL PRIVILEGES ON DATABASE mortise TO mortise;
   ```

3. **é…ç½®æ–‡ä»¶**
   ```bash
   # å¤åˆ¶é…ç½®æ–‡ä»¶
   cp src/main/resources/application-dev.yml.example src/main/resources/application-dev.yml
   
   # ä¿®æ”¹æ•°æ®åº“å’Œ Redis è¿æ¥ä¿¡æ¯
   ```

4. **å¯åŠ¨åº”ç”¨**
   ```bash
   mvn spring-boot:run
   ```

## ğŸ“Š ç›‘æ§ä¸ç®¡ç†

### Actuator ç«¯ç‚¹è®¿é—®

åº”ç”¨å¯åŠ¨åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ç›‘æ§ç«¯ç‚¹ï¼š

1. **è·å–è®¿é—®ä»¤ç‰Œ**
   ```bash
   curl -X POST http://localhost:9999/mortise/api/v1/auth/login \
     -H "Content-Type: application/json" \
     -d '{"account":"your_account","password":"your_password"}'
   ```

2. **è®¿é—®ç›‘æ§ç«¯ç‚¹**
   ```bash
   # ä½¿ç”¨è¿”å›çš„ token
   curl -H "Authorization: Bearer <token>" \
     http://localhost:9999/mortise/actuator/health
   ```

### ç›‘æ§ç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | æè¿° | URL |
|------|------|-----|
| å¥åº·æ£€æŸ¥ | åº”ç”¨æ•´ä½“å¥åº·çŠ¶æ€ | `/mortise/actuator/health` |
| åº”ç”¨ä¿¡æ¯ | ç‰ˆæœ¬ã€ç¯å¢ƒä¿¡æ¯ | `/mortise/actuator/info` |
| æ€§èƒ½æŒ‡æ ‡ | JVMã€ç³»ç»ŸæŒ‡æ ‡ | `/mortise/actuator/metrics` |
| Prometheus | ç›‘æ§ç³»ç»Ÿé›†æˆ | `/mortise/actuator/prometheus` |
| ç«¯ç‚¹åˆ—è¡¨ | æ‰€æœ‰å¯ç”¨ç«¯ç‚¹ | `/mortise/actuator` |

### Prometheus + Grafana é›†æˆ

```yaml
# prometheus.yml
scrape_configs:
  - job_name: 'mortise-app'
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: '/mortise/actuator/prometheus'
    scrape_interval: 15s
    bearer_token: 'your_jwt_token'
```

æ¨èç›‘æ§æŒ‡æ ‡ï¼š
- `jvm_memory_used_bytes` - JVMå†…å­˜ä½¿ç”¨
- `jvm_gc_pause_seconds` - GCæš‚åœæ—¶é—´  
- `hikaricp_connections_active` - æ•°æ®åº“è¿æ¥æ•°
- `http_server_requests_seconds` - HTTPè¯·æ±‚è€—æ—¶


## ğŸ“š æ–‡æ¡£

é¡¹ç›®åŒ…å«å®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£ï¼Œä½äº `docs/` ç›®å½•ï¼š

### ğŸ”§ é…ç½®ä¸ä¼˜åŒ–
- [Spring Boot è‡ªåŠ¨é…ç½®ä¼˜åŒ–](docs/spring-boot-autoconfiguration-optimization.md)
- [æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–](docs/database-performance-optimization.md)
- [MyBatis-Flex é…ç½®](docs/mybatis-flex-config-fixes.md)
- [å¾ªç¯ä¾èµ–ä¿®å¤](docs/circular-dependency-fixes.md)

### ğŸ“Š ç›‘æ§ä¸è¿ç»´
- [Actuator è®¿é—®æŒ‡å—](docs/actuator-access-guide.md)
- [æ•°æ®åº“ç›‘æ§é…ç½®](docs/database-monitoring-fixes.md)
- [å¥åº·æ£€æŸ¥é…ç½®](docs/health-check-config-fixes.md)

### ğŸ›¡ï¸ å®‰å…¨ä¸é™æµ
- [é™æµæ–¹æ¡ˆå®ç°](docs/rate-limiting.md)
- [é™æµæ–¹æ¡ˆå¯¹æ¯”](docs/rate-limit-comparison.md)

### ğŸ—ï¸ æ¶æ„è®¾è®¡
- [é¡¹ç›®æ¶æ„ä¼˜åŒ–](docs/project-architecture-optimization.md)

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£åˆ—è¡¨ï¼š[docs/README.md](docs/README.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘è§„èŒƒ
1. ä»£ç é£æ ¼éµå¾ªé˜¿é‡Œå·´å·´ Java å¼€å‘æ‰‹å†Œ
2. æäº¤ä¿¡æ¯ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) æ ¼å¼
3. æ–°å¢åŠŸèƒ½éœ€è¦åŒ…å«å•å…ƒæµ‹è¯•
4. é‡è¦å˜æ›´éœ€è¦æ›´æ–°ç›¸å…³æ–‡æ¡£

### å‚ä¸è´¡çŒ®
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤å˜æ›´ (`git commit -m 'feat: Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£**: æŸ¥é˜… [docs](docs/) ç›®å½•ä¸‹çš„æŠ€æœ¯æ–‡æ¡£
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/rymcu/mortise/issues)
- **åŠŸèƒ½å»ºè®®**: [GitHub Discussions](https://github.com/rymcu/mortise/discussions)

## ğŸ“„ License

æœ¬é¡¹ç›®åŸºäº [MIT License](./LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼š

[![Contributors](https://contrib.rocks/image?repo=rymcu/mortise&max=1000)](https://github.com/rymcu/mortise/graphs/contributors)

---

**æ›´æ–°æ—¥æœŸ**: 2025-09-24  
**ç»´æŠ¤è€…**: [RYMCU å¼€å‘å›¢é˜Ÿ](https://github.com/rymcu)
