# Mortise é¡¹ç›®æ–‡æ¡£

è¿™ä¸ªç›®å½•åŒ…å«äº† Mortise é¡¹ç›®çš„æŠ€æœ¯æ–‡æ¡£ã€ä½¿ç”¨æŒ‡å—å’Œç»´æŠ¤è„šæœ¬ã€‚

## ğŸ“‚ æ–‡æ¡£ç»“æ„

### ğŸ“Š ç›‘æ§ä¸è¿ç»´
- [`actuator-access-guide.md`](actuator-access-guide.md) - Spring Boot Actuator è®¿é—®æŒ‡å—
  - å¦‚ä½•è®¿é—®å’Œä½¿ç”¨ Actuator ç«¯ç‚¹
  - è®¤è¯é…ç½®å’Œå®‰å…¨è€ƒè™‘
  - ç›‘æ§é›†æˆ (Prometheus, Grafana)
  - æ•…éšœæ’æŸ¥æŒ‡å—

- [`test-actuator.ps1`](test-actuator.ps1) - Actuator è®¿é—®æ¼”ç¤ºè„šæœ¬
  - è‡ªåŠ¨åŒ–æµ‹è¯• Actuator ç«¯ç‚¹
  - ç™»å½•è®¤è¯ç¤ºä¾‹
  - æ€§èƒ½æŒ‡æ ‡å±•ç¤º

- [`database-monitoring-fixes.md`](database-monitoring-fixes.md) - æ•°æ®åº“ç›‘æ§ä¿®å¤
  - HikariCP è¿æ¥æ± ç›‘æ§ä¼˜åŒ–
  - ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿®å¤
  - ç›‘æ§æŒ‡æ ‡å®Œå–„

- [`database-performance-optimization.md`](database-performance-optimization.md) - æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–
  - è¿æ¥æ± é…ç½®ä¼˜åŒ–
  - PostgreSQL ç‰¹å®šé…ç½®
  - æ€§èƒ½ç›‘æ§è®¾ç½®

### ğŸ”§ é…ç½®ä¼˜åŒ–
- [`spring-boot-autoconfiguration-optimization.md`](spring-boot-autoconfiguration-optimization.md) - Spring Boot è‡ªåŠ¨é…ç½®ä¼˜åŒ–
  - è‡ªåŠ¨é…ç½®å†²çªè§£å†³æ–¹æ¡ˆ
  - Bean é‡å¤å®šä¹‰é—®é¢˜åˆ†æ
  - æœ€ä½³å®è·µå»ºè®®

- [`configuration-fixes.md`](configuration-fixes.md) - é…ç½®ä¿®å¤è®°å½•
  - Spring Boot å±æ€§é…ç½®ä¿®å¤
  - åºŸå¼ƒå±æ€§æ›´æ–°
  - é…ç½®éªŒè¯é—®é¢˜è§£å†³

- [`mybatis-flex-config-fixes.md`](mybatis-flex-config-fixes.md) - MyBatis-Flex é…ç½®ä¿®å¤
  - é…ç½®å±æ€§ä¿®æ­£
  - æ˜ å°„å™¨è·¯å¾„é…ç½®
  - æ€§èƒ½ä¼˜åŒ–è®¾ç½®

- [`circular-dependency-fixes.md`](circular-dependency-fixes.md) - å¾ªç¯ä¾èµ–ä¿®å¤
  - Bean å¾ªç¯ä¾èµ–è§£å†³æ–¹æ¡ˆ
  - @Lazy æ³¨è§£ä½¿ç”¨
  - ä¾èµ–æ³¨å…¥ä¼˜åŒ–

- [`scheduled-method-fixes.md`](scheduled-method-fixes.md) - å®šæ—¶æ–¹æ³•ä¿®å¤
  - @Scheduled æ–¹æ³•å‚æ•°é—®é¢˜
  - å®šæ—¶ä»»åŠ¡é…ç½®ä¼˜åŒ–
  - ä¾èµ–æ³¨å…¥ä¿®å¤

- [`health-check-config-fixes.md`](health-check-config-fixes.md) - å¥åº·æ£€æŸ¥é…ç½®ä¿®å¤
  - å¥åº·æ£€æŸ¥ç«¯ç‚¹é…ç½®
  - è‡ªå®šä¹‰å¥åº·æŒ‡ç¤ºå™¨
  - ç›‘æ§ç»„é…ç½®

- [`final-config-fixes.md`](final-config-fixes.md) - æœ€ç»ˆé…ç½®ä¿®å¤
  - ç»¼åˆé…ç½®é—®é¢˜è§£å†³
  - ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
  - é…ç½®æœ€ä½³å®è·µ

### ğŸ›¡ï¸ é™æµä¸å®‰å…¨
- [`rate-limiting.md`](rate-limiting.md) - Resilience4j é™æµæ–¹æ¡ˆ
  - é™æµç­–ç•¥å®ç°
  - æ³¨è§£ä½¿ç”¨æŒ‡å—
  - æ€§èƒ½é…ç½®ä¼˜åŒ–

- [`rate-limit-comparison.md`](rate-limit-comparison.md) - é™æµæ–¹æ¡ˆå¯¹æ¯”
  - ä¸åŒé™æµæŠ€æœ¯å¯¹æ¯”
  - æ€§èƒ½æµ‹è¯•ç»“æœ
  - æŠ€æœ¯é€‰å‹å»ºè®®

### ğŸ—ï¸ æ¶æ„ä¼˜åŒ–
- [`project-architecture-optimization.md`](project-architecture-optimization.md) - é¡¹ç›®æ¶æ„ä¼˜åŒ–
  - æ•´ä½“æ¶æ„è®¾è®¡
  - æ¨¡å—åŒ–æ”¹è¿›
  - ä»£ç ç»“æ„ä¼˜åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è®¿é—® Actuator ç›‘æ§ç«¯ç‚¹

1. **ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œ**
   ```bash
   # åœ¨é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨åº”ç”¨
   mvn spring-boot:run
   ```

2. **è¿è¡Œæµ‹è¯•è„šæœ¬**
   ```powershell
   # ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
   .\docs\test-actuator.ps1
   ```

3. **æ‰‹åŠ¨è®¿é—®ç«¯ç‚¹**
   ```powershell
   # ç™»å½•è·å– Token
   $loginData = @{
       account = "ronger@rymcu.com"
       password = "XzHvhX4CDaN696oQAXdmlcsrqgWbkxRl"
   } | ConvertTo-Json
   
   $response = Invoke-RestMethod -Uri "http://localhost:9999/mortise/api/v1/auth/login" -Method POST -ContentType "application/json" -Body $loginData
   $token = $response.data.token
   $headers = @{"Authorization" = "Bearer $token"}
   
   # è®¿é—®å¥åº·æ£€æŸ¥
   Invoke-RestMethod -Uri "http://localhost:9999/mortise/actuator/health" -Method GET -Headers $headers
   ```

## ğŸ“‹ å¸¸ç”¨ç›‘æ§ç«¯ç‚¹

| ç«¯ç‚¹ | æè¿° | URL |
|------|------|-----|
| å¥åº·æ£€æŸ¥ | åº”ç”¨æ•´ä½“å¥åº·çŠ¶æ€ | `/mortise/actuator/health` |
| åº”ç”¨ä¿¡æ¯ | ç‰ˆæœ¬ã€ç¯å¢ƒä¿¡æ¯ | `/mortise/actuator/info` |
| æ€§èƒ½æŒ‡æ ‡ | JVMã€ç³»ç»ŸæŒ‡æ ‡ | `/mortise/actuator/metrics` |
| Prometheus | ç›‘æ§ç³»ç»Ÿé›†æˆ | `/mortise/actuator/prometheus` |
| ç«¯ç‚¹åˆ—è¡¨ | æ‰€æœ‰å¯ç”¨ç«¯ç‚¹ | `/mortise/actuator` |

## ğŸ”’ å®‰å…¨é…ç½®

æ‰€æœ‰ Actuator ç«¯ç‚¹éƒ½éœ€è¦ JWT Token è®¤è¯ï¼š
- **ç™»å½•åœ°å€**: `POST /mortise/api/v1/auth/login`
- **è¯·æ±‚æ ¼å¼**: `{"account": "ç”¨æˆ·å", "password": "å¯†ç "}`
- **è®¤è¯å¤´**: `Authorization: Bearer <token>`

## ğŸ“ˆ ç›‘æ§é›†æˆ

### Prometheus é…ç½®
```yaml
scrape_configs:
  - job_name: 'mortise-app'
    static_configs:
      - targets: ['localhost:9999']
    metrics_path: '/mortise/actuator/prometheus'
    scrape_interval: 15s
    bearer_token: 'your_jwt_token'
```

### Grafana ä»ªè¡¨æ¿
æ¨èç›‘æ§æŒ‡æ ‡ï¼š
- `jvm_memory_used_bytes` - JVMå†…å­˜ä½¿ç”¨
- `jvm_gc_pause_seconds` - GCæš‚åœæ—¶é—´
- `http_server_requests_seconds` - HTTPè¯·æ±‚è€—æ—¶
- `hikaricp_connections_active` - æ•°æ®åº“è¿æ¥æ•°
- `system_cpu_usage` - CPUä½¿ç”¨ç‡

## ğŸ› ï¸ ç»´æŠ¤è¯´æ˜

### æ–‡æ¡£æ›´æ–°
- æ‰€æœ‰æ–°å¢çš„æŠ€æœ¯æ–‡æ¡£éƒ½åº”æ”¾åœ¨ `docs` ç›®å½•ä¸‹
- æ›´æ–°æ–‡æ¡£æ—¶è¯·åŒæ­¥æ›´æ–°æ­¤ README
- ä¿æŒæ–‡æ¡£çš„æ—¶æ•ˆæ€§å’Œå‡†ç¡®æ€§

### è„šæœ¬ç»´æŠ¤
- PowerShell è„šæœ¬éœ€è¦åœ¨ Windows ç¯å¢ƒä¸‹æµ‹è¯•
- æ·»åŠ æ–°çš„è‡ªåŠ¨åŒ–è„šæœ¬æ—¶ï¼Œè¯·æä¾›ä½¿ç”¨è¯´æ˜
- ç¡®ä¿è„šæœ¬çš„è·¨ç¯å¢ƒå…¼å®¹æ€§

### ç‰ˆæœ¬è®°å½•
- v2.0 - æ–‡æ¡£æ•´ç†ç‰ˆæœ¬ï¼šå°†æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£è¿ç§»è‡³ docs ç›®å½•ï¼Œå®Œå–„æ–‡æ¡£ç»“æ„
- v1.0 - åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å« Actuator è®¿é—®æŒ‡å—å’Œè‡ªåŠ¨é…ç½®ä¼˜åŒ–æŠ¥å‘Š
- åç»­ç‰ˆæœ¬è¯·åœ¨æ­¤è®°å½•é‡å¤§æ›´æ–°

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥é˜…ç›¸å…³æ–‡æ¡£
2. è¿è¡Œæµ‹è¯•è„šæœ¬è¯Šæ–­é—®é¢˜
3. è”ç³»é¡¹ç›®ç»´æŠ¤å›¢é˜Ÿ

---

**æ›´æ–°æ—¥æœŸ**: 2025-09-23  
**ç»´æŠ¤è€…**: RYMCU å¼€å‘å›¢é˜Ÿ